import{g as Dt}from"./iframe-BFMRay5H.js";import{r as Rt,a as Mt}from"./select-or-matches-DM7yTSmT.js";import{r as Ht,a as jt}from"./config-ODXtjL5r.js";import{r as kt}from"./sanitizer-BDKKlE4O.js";import{r as Gt}from"./events-CleOcHg4.js";var M,lt;function Vt(){if(lt)return M;lt=1;const w=Rt(),at=Mt(),ct=Ht(),H=kt(),{prefix:ut}=jt(),{CLICK:dt}=Gt(),f=`${ut}-combo-box`,T=`${f}--pristine`,j=`${f}__select`,k=`${f}__input`,q=`${f}__clear-input`,pt=`${q}__wrapper`,bt=`${f}__input-button-separator`,F=`${f}__toggle-list`,ft=`${F}__wrapper`,G=`${f}__list`,O=`${f}__list-option`,_=`${O}--focused`,V=`${O}--selected`,W=`${f}__status`,L=`.${f}`,Et=`.${j}`,I=`.${k}`,z=`.${q}`,X=`.${F}`,ht=`.${G}`,B=`.${O}`,K=`.${_}`,St=`.${V}`,mt=`.${W}`,Lt=".*{{query}}.*",At=()=>{},S=(s,t="")=>{const e=s;e.value=t;const o=new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{value:t}});e.dispatchEvent(o)},u=s=>{const t=s.closest(L);if(!t)throw new Error(`Element is missing outer ${L}`);const e=t.querySelector(Et),o=t.querySelector(I),n=t.querySelector(ht),i=t.querySelector(mt),l=t.querySelector(K),c=t.querySelector(St),a=t.querySelector(X),E=t.querySelector(z),b=t.classList.contains(T),d=t.dataset.disableFiltering==="true";return{comboBoxEl:t,selectEl:e,inputEl:o,listEl:n,statusEl:i,focusedOptionEl:l,selectedOptionEl:c,toggleListBtnEl:a,clearInputBtnEl:E,isPristine:b,disableFiltering:d}},Q=s=>{const{inputEl:t,toggleListBtnEl:e,clearInputBtnEl:o}=u(s);o.hidden=!0,o.disabled=!0,e.disabled=!0,t.disabled=!0},Tt=s=>{const{inputEl:t,toggleListBtnEl:e,clearInputBtnEl:o}=u(s);o.hidden=!0,o.setAttribute("aria-disabled",!0),e.setAttribute("aria-disabled",!0),t.setAttribute("aria-disabled",!0)},_t=s=>{const{inputEl:t,toggleListBtnEl:e,clearInputBtnEl:o}=u(s);o.hidden=!1,o.disabled=!1,e.disabled=!1,t.disabled=!1},J=s=>{const t=s.closest(L);if(t.dataset.enhanced)return;const e=t.querySelector("select");if(!e)throw new Error(`${L} is missing inner select`);const o=e.id,n=document.querySelector(`label[for="${o}"]`),i=`${o}--list`,l=`${o}-label`,c=[],{defaultValue:a}=t.dataset,{placeholder:E}=t.dataset;let b;if(E&&c.push({placeholder:E}),a)for(let p=0,A=e.options.length;p<A;p+=1){const h=e.options[p];if(h.value===a){b=h;break}}if(!n||!n.matches(`label[for="${o}"]`))throw new Error(`${L} for ${o} is either missing a label or a "for" attribute`);n.setAttribute("id",l),n.setAttribute("id",l),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1"),e.classList.add("usa-sr-only",j),e.id="",e.value="",["required","aria-label","aria-labelledby"].forEach(p=>{if(e.hasAttribute(p)){const A=e.getAttribute(p);c.push({[p]:A}),e.removeAttribute(p)}});const d=document.createElement("input");if(d.setAttribute("id",o),d.setAttribute("aria-owns",i),d.setAttribute("aria-controls",i),d.setAttribute("aria-autocomplete","list"),d.setAttribute("aria-expanded","false"),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("class",k),d.setAttribute("type","text"),d.setAttribute("role","combobox"),c.forEach(p=>Object.keys(p).forEach(A=>{const h=H.escapeHTML`${p[A]}`;d.setAttribute(A,h)})),t.insertAdjacentElement("beforeend",d),t.insertAdjacentHTML("beforeend",H.escapeHTML`
    <span class="${pt}" tabindex="-1">
        <button type="button" class="${q}" aria-label="Clear the select contents">&nbsp;</button>
      </span>
      <span class="${bt}">&nbsp;</span>
      <span class="${ft}" tabindex="-1">
        <button type="button" tabindex="-1" class="${F}" aria-label="Toggle the dropdown list">&nbsp;</button>
      </span>
      <ul
        tabindex="-1"
        id="${i}"
        class="${G}"
        role="listbox"
        aria-labelledby="${l}"
        hidden>
      </ul>
      <div class="${W} usa-sr-only" role="status"></div>`),b){const{inputEl:p}=u(t);S(e,b.value),S(p,b.text),t.classList.add(T)}e.disabled&&(Q(t),e.disabled=!1),e.hasAttribute("aria-disabled")&&(Tt(t),e.removeAttribute("aria-disabled")),t.dataset.enhanced="true"},C=(s,t,{skipFocus:e,preventScroll:o}={})=>{const{inputEl:n,listEl:i,focusedOptionEl:l}=u(s);if(l&&(l.classList.remove(_),l.setAttribute("tabIndex","-1")),t){if(n.setAttribute("aria-activedescendant",t.id),t.setAttribute("tabIndex","0"),t.classList.add(_),!o){const c=t.offsetTop+t.offsetHeight,a=i.scrollTop+i.offsetHeight;c>a&&(i.scrollTop=c-i.offsetHeight),t.offsetTop<i.scrollTop&&(i.scrollTop=t.offsetTop)}e||t.focus({preventScroll:o})}else n.setAttribute("aria-activedescendant",""),n.focus()},Y=(s,t="",e={})=>{const o=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");let n=s.replace(/{{(.*?)}}/g,(i,l)=>{const c=l.trim(),a=e[c];if(c!=="query"&&a){const E=new RegExp(a,"i"),b=t.match(E);return b?o(b[1]):""}return o(t)});return n=`^(?:${n})$`,new RegExp(n,"i")},x=s=>{const{comboBoxEl:t,selectEl:e,inputEl:o,listEl:n,statusEl:i,isPristine:l,disableFiltering:c}=u(s);let a,E;const b=`${n.id}--option-`,d=(o.value||"").toLowerCase(),p=t.dataset.filter||Lt,A=Y(p,d,t.dataset);let h=[];const st=[],ot=[],wt=[...e.options],qt=r=>{if(c||l){h.push(r);return}r.text.toLowerCase().startsWith(d)?st.push(r):ot.push(r),h=[...st,...ot]},nt=r=>A.test(r.text),Ft=r=>r.value&&(c||l||!d||nt(r)),Nt=r=>c&&!E&&nt(r),Ut=r=>e.value&&r.value===e.value;wt.forEach(r=>{if(Ft(r)){qt(r);const $=`${b}${h.indexOf(r)}`;Nt(r)&&(E=$),Ut(r)&&(a=$)}});const v=h.length,Pt=h.map((r,$)=>{const it=`${b}${$}`,D=[O];let R="-1",rt="false";it===a&&(D.push(V,_),R="0",rt="true"),!a&&$===0&&(D.push(_),R="0");const m=document.createElement("li");return m.setAttribute("aria-setsize",h.length),m.setAttribute("aria-posinset",$+1),m.setAttribute("aria-selected",rt),m.setAttribute("id",it),m.setAttribute("class",D.join(" ")),m.setAttribute("tabindex",R),m.setAttribute("role","option"),m.setAttribute("data-value",r.value),m.textContent=r.text,m}),P=document.createElement("li");P.setAttribute("class",`${O}--no-results`),P.textContent="No results found",n.hidden=!1,v?(n.innerHTML="",Pt.forEach(r=>n.insertAdjacentElement("beforeend",r))):(n.innerHTML="",n.insertAdjacentElement("beforeend",P)),o.setAttribute("aria-expanded","true"),i.textContent=v?`${v} result${v>1?"s":""} available.`:"No results.";let y;l&&a?y=n.querySelector(`#${a}`):c&&E&&(y=n.querySelector(`#${E}`)),y&&C(n,y,{skipFocus:!0})},g=s=>{const{inputEl:t,listEl:e,statusEl:o,focusedOptionEl:n}=u(s);o.innerHTML="",t.setAttribute("aria-expanded","false"),t.setAttribute("aria-activedescendant",""),n&&n.classList.remove(_),e.scrollTop=0,e.hidden=!0},N=s=>{const{comboBoxEl:t,selectEl:e,inputEl:o}=u(s);S(e,s.dataset.value),S(o,s.textContent),t.classList.add(T),g(t),o.focus()},gt=s=>{const{comboBoxEl:t,listEl:e,selectEl:o,inputEl:n}=u(s),i=!e.hidden;o.value&&S(o),n.value&&S(n),t.classList.remove(T),i&&x(t),n.focus()},U=s=>{const{comboBoxEl:t,selectEl:e,inputEl:o}=u(s),n=e.value,i=(o.value||"").toLowerCase();if(n)for(let l=0,c=e.options.length;l<c;l+=1){const a=e.options[l];if(a.value===n){i!==a.text&&S(o,a.text),t.classList.add(T);return}}i&&S(o)},$t=s=>{const{comboBoxEl:t,selectEl:e,inputEl:o,statusEl:n}=u(s);n.textContent="";const i=(o.value||"").toLowerCase();if(i)for(let l=0,c=e.options.length;l<c;l+=1){const a=e.options[l];if(a.text.toLowerCase()===i){S(e,a.value),S(o,a.text),t.classList.add(T);return}}U(t)},xt=s=>{const{comboBoxEl:t,inputEl:e}=u(s.target);g(t),U(t),e.focus()},Z=s=>{const{comboBoxEl:t,listEl:e}=u(s.target);e.hidden&&x(t);const o=e.querySelector(K)||e.querySelector(B);o&&C(t,o),s.preventDefault()},Ot=s=>{const{comboBoxEl:t,listEl:e}=u(s.target),o=!e.hidden;$t(t),o&&g(t),s.preventDefault()},tt=s=>{const t=s.target,e=t.nextSibling;e&&C(t,e),s.preventDefault()},Ct=s=>{N(s.target),s.preventDefault()},It=s=>{N(s.target),s.preventDefault()},et=s=>{const{comboBoxEl:t,listEl:e,focusedOptionEl:o}=u(s.target),n=o&&o.previousSibling,i=!e.hidden;C(t,n),i&&s.preventDefault(),n||g(t)},Bt=s=>{s.classList.contains(_)||C(s,s,{preventScroll:!0})},vt=s=>{const{comboBoxEl:t,listEl:e,inputEl:o}=u(s);e.hidden?x(t):g(t),o.focus()},yt=s=>{const{comboBoxEl:t,listEl:e}=u(s);e.hidden&&x(t)};return M=ct({[dt]:{[I](){this.disabled||yt(this)},[X](){this.disabled||vt(this)},[B](){this.disabled||N(this)},[z](){this.disabled||gt(this)}},focusout:{[L](s){this.contains(s.relatedTarget)||(U(this),g(this))}},keydown:{[L]:w({Escape:xt}),[I]:w({Enter:Ot,ArrowDown:Z,Down:Z}),[B]:w({ArrowUp:et,Up:et,ArrowDown:tt,Down:tt,Enter:It," ":Ct,"Shift+Tab":At})},input:{[I](){this.closest(L).classList.remove(T),x(this)}},mouseover:{[B](){Bt(this)}}},{init(s){at(L,s).forEach(t=>{J(t)})},getComboBoxContext:u,enhanceComboBox:J,generateDynamicRegExp:Y,disable:Q,enable:_t,displayList:x,hideList:g,COMBO_BOX_CLASS:f}),M}var Wt=Vt();const Zt=Dt(Wt);export{Zt as c,Vt as r};
