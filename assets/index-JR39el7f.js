import{j as G}from"./jsx-runtime-DPda6Ybg.js";import{g as fe}from"./_commonjsHelpers-Cpj98o6Y.js";import{s as me,k as Ae}from"./select-or-matches-BLLALKpn.js";import{b as z,c as K,s as he}from"./config-BXli1stc.js";import{s as ge}from"./sanitizer-BtXph-xc.js";import{r as W}from"./index-DhrokLn_.js";import{F as _e}from"./form-group-xsfonisk.js";import{t as Le,s as Se}from"./index-CCDHfnhN.js";import{s as $e,f as ve}from"./index-DDEeHXjB.js";import{e as Ee}from"./events-C6LRLXdn.js";const U=me,ye=z,C=ge,{prefix:l}=K,v=`${l}-file-input`,E=`.${v}`,Q=`${l}-file-input__input`,F=`${l}-file-input__target`,J=`.${Q}`,be=`${l}-file-input__box`,ee=`${l}-file-input__instructions`,te=`${l}-file-input__preview`,se=`${l}-file-input__preview-heading`,N=`${l}-file-input--disabled`,Ce=`${l}-file-input__choose`,ne=`${l}-file-input__accepted-files-message`,j=`${l}-file-input__drag-text`,T=`${l}-file-input--drag`,Y="is-loading",D="has-invalid-file",L=`${l}-file-input__preview-image`,Ne=`${L}--generic`,Te=`${L}--pdf`,Ie=`${L}--word`,Re=`${L}--video`,xe=`${L}--excel`,re=`${l}-sr-only`,g="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let P=!0,w="",V="";const y=e=>{const t=e.closest(E);if(!t)throw new Error(`Element is missing outer ${E}`);const s=t.querySelector(J);return{dropZoneEl:t,inputEl:s}},Oe=e=>{const{dropZoneEl:t,inputEl:s}=y(e);s.disabled=!0,t.classList.add(N)},De=e=>{const{dropZoneEl:t}=y(e);t.classList.add(N)},Pe=e=>{const{dropZoneEl:t,inputEl:s}=y(e);s.disabled=!1,t.classList.remove(N),t.removeAttribute("aria-disabled")},we=e=>{const t=e.charCodeAt(0);return t===32?"-":t>=65&&t<=90?`img_${e.toLowerCase()}`:`__${t.toString(16).slice(-4)}`},Ve=e=>e.replace(/[^a-z0-9]/g,we),qe=e=>`${e}-${Math.floor(Date.now().toString()/1e3)}`,oe=e=>e.hasAttribute("multiple")?"files":"file",Fe=e=>{const t=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div");return e.classList.remove(v),e.classList.add(Q),t.classList.add(v),n.classList.add(be),s.classList.add(F),s.prepend(n),e.parentNode.insertBefore(s,e),e.parentNode.insertBefore(t,s),s.appendChild(e),t.appendChild(s),s},Me=e=>{const t=e.closest(E),s=oe(e),n=document.createElement("div"),r=`Drag ${s} here or`,o="choose from folder";return w=`${r} ${o}`,n.classList.add(ee),n.setAttribute("aria-hidden","true"),e.setAttribute("aria-label",w),n.innerHTML=C.escapeHTML`<span class="${j}">${r}</span> <span class="${Ce}">${o}</span>`,e.parentNode.insertBefore(n,e),(/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.querySelector(`.${j}`).outerHTML=""),n},Be=e=>{const t=document.createElement("div"),s=oe(e),n=e.closest(E),r=e.closest(`.${F}`);V=`No ${s} selected.`,t.classList.add(re),t.setAttribute("aria-live","polite"),t.textContent=V,n.insertBefore(t,r)},He=e=>{const t=e.hasAttribute("aria-disabled")||e.hasAttribute("disabled"),s=Fe(e),n=Me(e),{dropZoneEl:r}=y(e);return t?r.classList.add(N):Be(e),{instructions:n,dropTarget:s}},ae=(e,t)=>{const s=e.querySelectorAll(`.${te}`),n=e.querySelector(`.${se}`),r=e.querySelector(`.${ne}`),o=a=>{a.parentNode.removeChild(a)};n&&(n.outerHTML=""),r&&(r.outerHTML="",e.classList.remove(D)),s!==null&&(t&&t.removeAttribute("hidden"),Array.prototype.forEach.call(s,o))},Ge=(e,t,s)=>{const n=e;let r=V;t.length===1?r=`You have selected the file: ${s}`:t.length>1&&(r=`You have selected ${t.length} files: ${s.join(", ")}`),setTimeout(()=>{n.textContent=r},1e3)},We=(e,t)=>{const s=document.createElement("div"),n=e.closest(`.${F}`),r=n.querySelector(`.${ee}`);let o="Change file",a="";t.length===1?a=C.escapeHTML`Selected file <span class="usa-file-input__choose">${o}</span>`:t.length>1&&(o="Change files",a=C.escapeHTML`${t.length} files selected <span class="usa-file-input__choose">${o}</span>`),r.setAttribute("hidden","true"),s.classList.add(se),s.innerHTML=a,n.insertBefore(s,r),e.setAttribute("aria-label",o)},Ue=(e,t,s,n)=>{const r=e.target.files,a=n.closest(`.${v}`).querySelector(`.${re}`),d=[];ae(n,s);for(let c=0;c<r.length;c+=1){const f=new FileReader,i=r[c].name;let h;d.push(i),f.onloadstart=function(){h=qe(Ve(i)),s.insertAdjacentHTML("afterend",C.escapeHTML`<div class="${te}" aria-hidden="true">
          <img id="${h}" src="${g}" alt="" class="${L} ${Y}"/>${i}
        <div>`)},f.onloadend=function(){const u=document.getElementById(h);i.indexOf(".pdf")>0?u.setAttribute("onerror",`this.onerror=null;this.src="${g}"; this.classList.add("${Te}")`):i.indexOf(".doc")>0||i.indexOf(".pages")>0?u.setAttribute("onerror",`this.onerror=null;this.src="${g}"; this.classList.add("${Ie}")`):i.indexOf(".xls")>0||i.indexOf(".numbers")>0?u.setAttribute("onerror",`this.onerror=null;this.src="${g}"; this.classList.add("${xe}")`):i.indexOf(".mov")>0||i.indexOf(".mp4")>0?u.setAttribute("onerror",`this.onerror=null;this.src="${g}"; this.classList.add("${Re}")`):u.setAttribute("onerror",`this.onerror=null;this.src="${g}"; this.classList.add("${Ne}")`),u.classList.remove(Y),u.src=f.result},r[c]&&f.readAsDataURL(r[c])}r.length===0?t.setAttribute("aria-label",w):We(t,r),Ge(a,r,d)},je=(e,t,s,n)=>{const r=t.getAttribute("accept");n.classList.remove(D);const o=(a,d)=>{let c=!1;return a.indexOf(d)>=0&&(c=!0),c};if(r){const a=r.split(","),d=document.createElement("div");let c=!0;const f=e.target.files||e.dataTransfer.files;for(let i=0;i<f.length;i+=1){const h=f[i];if(c)for(let S=0;S<a.length;S+=1){const u=a[S];if(c=h.name.indexOf(u)>0||o(h.type,u.replace(/\*/g,"")),c){P=!0;break}}else break}c||(ae(n,s),t.value="",n.insertBefore(d,t),d.textContent=t.dataset.errormessage||"This is not a valid file type.",d.classList.add(ne),n.classList.add(D),P=!1,e.preventDefault(),e.stopPropagation())}},Ye=(e,t,s,n)=>{je(e,t,s,n),P===!0&&Ue(e,t,s,n)},ke=ye({},{init(e){U(E,e).forEach(t=>{const{instructions:s,dropTarget:n}=He(t);n.addEventListener("dragover",function(){this.classList.add(T)},!1),n.addEventListener("dragleave",function(){this.classList.remove(T)},!1),n.addEventListener("drop",function(){this.classList.remove(T)},!1),t.addEventListener("change",r=>Ye(r,t,s,n),!1)})},teardown(e){U(J,e).forEach(t=>{const s=t.parentElement.parentElement;s.parentElement.replaceChild(t,s),t.className=v})},getFileInputContext:y,disable:Oe,ariaDisable:De,enable:Pe});var Xe=ke;const k=fe(Xe),X=({id:e,required:t,label:s,helperText:n,errors:r,...o})=>{const a=W.useRef(null);return W.useLayoutEffect(()=>{const d=a.current;return k.on(d),()=>k.off(d)},[]),G.jsx(_e,{id:`form-group-${e}`,required:t,label:s,helperText:n,errors:r,fieldControl:G.jsx("input",{className:"usa-file-input",type:"file",ref:a,id:e,...o})})};try{X.displayName="FileInput",X.__docgenInfo={description:"File input allows users to attach one or multiple files.",displayName:"FileInput",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name for the file input field",name:"name",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"A boolean indicating whether or not the field is required",name:"required",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Label text to display with the input",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text to display with the input",name:"helperText",required:!1,type:{name:"string"}},errors:{defaultValue:null,description:"An array of string error messages",name:"errors",required:!1,type:{name:"string | string[]"}}}}}catch{}try{fileinput.displayName="fileinput",fileinput.__docgenInfo={description:"File input allows users to attach one or multiple files.",displayName:"fileinput",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name for the file input field",name:"name",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"A boolean indicating whether or not the field is required",name:"required",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Label text to display with the input",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text to display with the input",name:"helperText",required:!1,type:{name:"string"}},errors:{defaultValue:null,description:"An array of string error messages",name:"errors",required:!1,type:{name:"string | string[]"}}}}}catch{}const Ze=Ae,ze=z,Ke=he,ie=Le,Qe=ve,I=Se,Je=$e,{CLICK:et}=Ee,{prefix:p}=K,tt="body",le=`.${p}-header`,_=`.${p}-nav`,st=`.${p}-nav-container`,R=`.${p}-nav__primary`,nt=`.${p}-nav__primary-item`,q=`button.${p}-nav__link`,rt=`${_} a`,M="data-nav-hidden",ce=`.${p}-menu-btn`,B=`.${p}-nav__close`,ot=`.${p}-overlay`,at=`${B}, .${p}-overlay`,it=[_,ot].join(", "),lt=`body *:not(${le}, ${st}, ${_}, ${_} *):not([aria-hidden])`,ct=`[${M}]`,de="usa-js-mobile-nav--active",dt="is-visible";let A,m,$;const H=()=>document.body.classList.contains(de),ue=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),ut=Je(),pe=window.getComputedStyle(document.body).getPropertyValue("padding-right"),Z=`${parseInt(pe.replace(/px/,""),10)+parseInt(ut.replace(/px/,""),10)}px`,pt=()=>{const e=document.querySelector(`${le}`).parentNode;$=document.querySelectorAll(lt),$.forEach(t=>{t!==e&&(t.setAttribute("aria-hidden",!0),t.setAttribute(M,""))})},ft=()=>{$=document.querySelectorAll(ct),$&&$.forEach(e=>{e.removeAttribute("aria-hidden"),e.removeAttribute(M)})},mt=e=>{e?pt():ft()},At=()=>{ue&&document.body.classList.add("is-safari")},ht=e=>{const t=`-${window.scrollY}px`;ue&&e.style.setProperty("--scrolltop",t)},x=e=>{const{body:t}=document,s=typeof e=="boolean"?e:!H();ht(t),t.classList.toggle(de,s),Ke(it).forEach(o=>o.classList.toggle(dt,s)),A.focusTrap.update(s);const n=t.querySelector(B),r=document.querySelector(ce);return t.style.paddingRight=t.style.paddingRight===Z?pe:Z,mt(s),s&&n?n.focus():!s&&r&&getComputedStyle(r).display!=="none"&&r.focus(),s},O=()=>{const e=document.body.querySelector(B);H()&&e&&e.getBoundingClientRect().width===0&&A.toggleNav.call(e,!1)},gt=()=>A.toggleNav.call(A,!1),b=()=>{m&&(ie(m,!1),m=null)},_t=e=>{const t=e.target.closest(nt);if(!e.target.matches(q)){const s=t.querySelector(q);s&&s.focus()}},Lt=e=>{b(),_t(e)};A=ze({[et]:{[q](){return m!==this&&b(),m||(m=this,ie(m,!0)),!1},[tt]:b,[ce]:x,[at]:x,[rt](){const e=this.closest(I.ACCORDION);e&&I.getButtons(e).forEach(t=>I.hide(t)),H()&&A.toggleNav.call(A,!1)}},keydown:{[R]:Ze({Escape:Lt})},focusout:{[R](e){e.target.closest(R).contains(e.relatedTarget)||b()}}},{init(e){const t=e.matches(_)?e:e.querySelector(_);t&&(A.focusTrap=Qe(t,{Escape:gt})),At(),O(),window.addEventListener("resize",O,!1)},teardown(){window.removeEventListener("resize",O,!1),m=!1},focusTrap:null,toggleNav:x});export{X as F};
