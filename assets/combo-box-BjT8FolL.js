import{j as M}from"./jsx-runtime--26OcTxz.js";import{S as re}from"./select-BOzcq5T1.js";import{g as ce}from"./_commonjsHelpers-BosuxZz1.js";import{k as ue}from"./index-D6IA0wpC.js";import{s as de}from"./select-or-matches-Bu-g4rUn.js";import{b as pe,c as fe}from"./config-BXli1stc.js";import{s as be}from"./sanitizer-BtXph-xc.js";import{e as me}from"./events-C6LRLXdn.js";import{r as j}from"./index-BLgStI3F.js";const R=ue,he=de,Ee=pe,k=be,{prefix:Se}=fe,{CLICK:Te}=me,b=`${Se}-combo-box`,O=`${b}--pristine`,Q=`${b}__select`,Y=`${b}__input`,F=`${b}__clear-input`,ge=`${F}__wrapper`,_e=`${b}__input-button-separator`,V=`${b}__toggle-list`,Le=`${V}__wrapper`,Z=`${b}__list`,v=`${b}__list-option`,A=`${v}--focused`,ee=`${v}--selected`,te=`${b}__status`,g=`.${b}`,Ae=`.${Q}`,w=`.${Y}`,oe=`.${F}`,se=`.${V}`,xe=`.${Z}`,q=`.${v}`,ne=`.${A}`,Oe=`.${ee}`,ye=`.${te}`,Ce=".*{{query}}.*",$e=()=>{},E=(o,e="")=>{const t=o;t.value=e;const s=new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{value:e}});t.dispatchEvent(s)},c=o=>{const e=o.closest(g);if(!e)throw new Error(`Element is missing outer ${g}`);const t=e.querySelector(Ae),s=e.querySelector(w),n=e.querySelector(xe),i=e.querySelector(ye),a=e.querySelector(ne),r=e.querySelector(Oe),l=e.querySelector(se),f=e.querySelector(oe),m=e.classList.contains(O),S=e.dataset.disableFiltering==="true";return{comboBoxEl:e,selectEl:t,inputEl:s,listEl:n,statusEl:i,focusedOptionEl:a,selectedOptionEl:r,toggleListBtnEl:l,clearInputBtnEl:f,isPristine:m,disableFiltering:S}},ie=o=>{const{inputEl:e,toggleListBtnEl:t,clearInputBtnEl:s}=c(o);s.hidden=!0,s.disabled=!0,t.disabled=!0,e.disabled=!0},ve=o=>{const{inputEl:e,toggleListBtnEl:t,clearInputBtnEl:s}=c(o);s.hidden=!0,s.setAttribute("aria-disabled",!0),t.setAttribute("aria-disabled",!0),e.setAttribute("aria-disabled",!0)},Ie=o=>{const{inputEl:e,toggleListBtnEl:t,clearInputBtnEl:s}=c(o);s.hidden=!1,s.disabled=!1,t.disabled=!1,e.disabled=!1},X=o=>{const e=o.closest(g);if(e.dataset.enhanced)return;const t=e.querySelector("select");if(!t)throw new Error(`${g} is missing inner select`);const s=t.id,n=document.querySelector(`label[for="${s}"]`),i=`${s}--list`,a=`${s}-label`,r=`${s}--assistiveHint`,l=[],{defaultValue:f}=e.dataset,{placeholder:m}=e.dataset;let S;if(m&&l.push({placeholder:m}),f)for(let u=0,p=t.options.length;u<p;u+=1){const T=t.options[u];if(T.value===f){S=T;break}}if(!n||!n.matches(`label[for="${s}"]`))throw new Error(`${g} for ${s} is either missing a label or a "for" attribute`);n.setAttribute("id",a),n.setAttribute("id",a),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.classList.add("usa-sr-only",Q),t.id="",t.value="",["required","aria-label","aria-labelledby"].forEach(u=>{if(t.hasAttribute(u)){const p=t.getAttribute(u);l.push({[u]:p}),t.removeAttribute(u)}});const d=document.createElement("input");if(d.setAttribute("id",s),d.setAttribute("aria-owns",i),d.setAttribute("aria-controls",i),d.setAttribute("aria-autocomplete","list"),d.setAttribute("aria-describedby",r),d.setAttribute("aria-expanded","false"),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("class",Y),d.setAttribute("type","text"),d.setAttribute("role","combobox"),l.forEach(u=>Object.keys(u).forEach(p=>{const T=k.escapeHTML`${u[p]}`;d.setAttribute(p,T)})),e.insertAdjacentElement("beforeend",d),e.insertAdjacentHTML("beforeend",k.escapeHTML`
    <span class="${ge}" tabindex="-1">
        <button type="button" class="${F}" aria-label="Clear the select contents">&nbsp;</button>
      </span>
      <span class="${_e}">&nbsp;</span>
      <span class="${Le}" tabindex="-1">
        <button type="button" tabindex="-1" class="${V}" aria-label="Toggle the dropdown list">&nbsp;</button>
      </span>
      <ul
        tabindex="-1"
        id="${i}"
        class="${Z}"
        role="listbox"
        aria-labelledby="${a}"
        hidden>
      </ul>
      <div class="${te} usa-sr-only" role="status"></div>
      <span id="${r}" class="usa-sr-only">
        When autocomplete results are available use up and down arrows to review and enter to select.
        Touch device users, explore by touch or with swipe gestures.
      </span>`),S){const{inputEl:u}=c(e);E(t,S.value),E(u,S.text),e.classList.add(O)}t.disabled&&(ie(e),t.disabled=!1),t.hasAttribute("aria-disabled")&&(ve(e),t.removeAttribute("aria-disabled")),e.dataset.enhanced="true"},I=(o,e,{skipFocus:t,preventScroll:s}={})=>{const{inputEl:n,listEl:i,focusedOptionEl:a}=c(o);if(a&&(a.classList.remove(A),a.setAttribute("tabIndex","-1")),e){if(n.setAttribute("aria-activedescendant",e.id),e.setAttribute("tabIndex","0"),e.classList.add(A),!s){const r=e.offsetTop+e.offsetHeight,l=i.scrollTop+i.offsetHeight;r>l&&(i.scrollTop=r-i.offsetHeight),e.offsetTop<i.scrollTop&&(i.scrollTop=e.offsetTop)}t||e.focus({preventScroll:s})}else n.setAttribute("aria-activedescendant",""),n.focus()},le=(o,e="",t={})=>{const s=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");let n=o.replace(/{{(.*?)}}/g,(i,a)=>{const r=a.trim(),l=t[r];if(r!=="query"&&l){const f=new RegExp(l,"i"),m=e.match(f);return m?s(m[1]):""}return s(e)});return n=`^(?:${n})$`,new RegExp(n,"i")},C=o=>{const{comboBoxEl:e,selectEl:t,inputEl:s,listEl:n,statusEl:i,isPristine:a,disableFiltering:r}=c(o);let l,f;const m=`${n.id}--option-`,S=(s.value||"").toLowerCase(),d=e.dataset.filter||Ce,u=le(d,S,e.dataset),p=[];for(let _=0,$=t.options.length;_<$;_+=1){const L=t.options[_],y=`${m}${p.length}`;L.value&&(r||a||!S||u.test(L.text))&&(t.value&&L.value===t.value&&(l=y),r&&!f&&u.test(L.text)&&(f=y),p.push(L))}const T=p.length,ae=p.map((_,$)=>{const L=`${m}${$}`,y=[v];let P="-1",H="false";L===l&&(y.push(ee,A),P="0",H="true"),!l&&$===0&&(y.push(A),P="0");const h=document.createElement("li");return h.setAttribute("aria-setsize",p.length),h.setAttribute("aria-posinset",$+1),h.setAttribute("aria-selected",H),h.setAttribute("id",L),h.setAttribute("class",y.join(" ")),h.setAttribute("tabindex",P),h.setAttribute("role","option"),h.setAttribute("data-value",_.value),h.textContent=_.text,h}),N=document.createElement("li");N.setAttribute("class",`${v}--no-results`),N.textContent="No results found",n.hidden=!1,T?(n.innerHTML="",ae.forEach(_=>n.insertAdjacentElement("beforeend",_))):(n.innerHTML="",n.insertAdjacentElement("beforeend",N)),s.setAttribute("aria-expanded","true"),i.textContent=T?`${T} result${T>1?"s":""} available.`:"No results.";let B;a&&l?B=n.querySelector(`#${l}`):r&&f&&(B=n.querySelector(`#${f}`)),B&&I(n,B,{skipFocus:!0})},x=o=>{const{inputEl:e,listEl:t,statusEl:s,focusedOptionEl:n}=c(o);s.innerHTML="",e.setAttribute("aria-expanded","false"),e.setAttribute("aria-activedescendant",""),n&&n.classList.remove(A),t.scrollTop=0,t.hidden=!0},D=o=>{const{comboBoxEl:e,selectEl:t,inputEl:s}=c(o);E(t,o.dataset.value),E(s,o.textContent),e.classList.add(O),x(e),s.focus()},Be=o=>{const{comboBoxEl:e,listEl:t,selectEl:s,inputEl:n}=c(o),i=!t.hidden;s.value&&E(s),n.value&&E(n),e.classList.remove(O),i&&C(e),n.focus()},U=o=>{const{comboBoxEl:e,selectEl:t,inputEl:s}=c(o),n=t.value,i=(s.value||"").toLowerCase();if(n)for(let a=0,r=t.options.length;a<r;a+=1){const l=t.options[a];if(l.value===n){i!==l.text&&E(s,l.text),e.classList.add(O);return}}i&&E(s)},we=o=>{const{comboBoxEl:e,selectEl:t,inputEl:s,statusEl:n}=c(o);n.textContent="";const i=(s.value||"").toLowerCase();if(i)for(let a=0,r=t.options.length;a<r;a+=1){const l=t.options[a];if(l.text.toLowerCase()===i){E(t,l.value),E(s,l.text),e.classList.add(O);return}}U(e)},qe=o=>{const{comboBoxEl:e,inputEl:t}=c(o.target);x(e),U(e),t.focus()},G=o=>{const{comboBoxEl:e,listEl:t}=c(o.target);t.hidden&&C(e);const s=t.querySelector(ne)||t.querySelector(q);s&&I(e,s),o.preventDefault()},Ne=o=>{const{comboBoxEl:e,listEl:t}=c(o.target),s=!t.hidden;we(e),s&&x(e),o.preventDefault()},z=o=>{const e=o.target,t=e.nextSibling;t&&I(e,t),o.preventDefault()},Pe=o=>{D(o.target),o.preventDefault()},Re=o=>{D(o.target),o.preventDefault()},J=o=>{const{comboBoxEl:e,listEl:t,focusedOptionEl:s}=c(o.target),n=s&&s.previousSibling,i=!t.hidden;I(e,n),i&&o.preventDefault(),n||x(e)},Fe=o=>{o.classList.contains(A)||I(o,o,{preventScroll:!0})},Ve=o=>{const{comboBoxEl:e,listEl:t,inputEl:s}=c(o);t.hidden?C(e):x(e),s.focus()},De=o=>{const{comboBoxEl:e,listEl:t}=c(o);t.hidden&&C(e)},Ue=Ee({[Te]:{[w](){this.disabled||De(this)},[se](){this.disabled||Ve(this)},[q](){this.disabled||D(this)},[oe](){this.disabled||Be(this)}},focusout:{[g](o){this.contains(o.relatedTarget)||(U(this),x(this))}},keydown:{[g]:R({Escape:qe}),[w]:R({Enter:Ne,ArrowDown:G,Down:G}),[q]:R({ArrowUp:J,Up:J,ArrowDown:z,Down:z,Enter:Re," ":Pe,"Shift+Tab":$e})},input:{[w](){this.closest(g).classList.remove(O),C(this)}},mouseover:{[q](){Fe(this)}}},{init(o){he(g,o).forEach(e=>{X(e)})},getComboBoxContext:c,enhanceComboBox:X,generateDynamicRegExp:le,disable:ie,enable:Ie,displayList:C,hideList:x,COMBO_BOX_CLASS:b});var He=Ue;const W=ce(He),K=({placeholder:o,...e})=>{const t=j.useRef(null);j.useLayoutEffect(()=>{const n=t.current;return W.on(n),()=>W.off(n)});const s={className:"usa-combo-box",ref:t};return o&&(s["data-placeholder"]=o),e.defaultValue&&(s["data-default-value"]=e.defaultValue),M.jsx("div",{...s,children:M.jsx(re,{...e})})};try{K.displayName="ComboBox",K.__docgenInfo={description:"A combo box helps users select an item from a large list of options.",displayName:"ComboBox",props:{id:{defaultValue:null,description:`The unique identifier for this component
The unique identifier for the select`,name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:`The name for the combo box input field
The name of the select`,name:"name",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"The placeholder value to display in the control",name:"placeholder",required:!1,type:{name:"string"}},defaultOption:{defaultValue:null,description:"The default option of the select",name:"defaultOption",required:!1,type:{name:"SelectOptionProps"}},options:{defaultValue:null,description:"The options of the select",name:"options",required:!1,type:{name:"SelectOptionProps[]"}},children:{defaultValue:null,description:"SelectOption components to display as children",name:"children",required:!1,type:{name:"(ReactElement<SelectOptionProps, string | JSXElementConstructor<any>> | ReactElement<SelectOptionProps, string | JSXElementConstructor<...>>[]) & ReactNode"}},onChange:{defaultValue:null,description:"Event handler for when value of the select is changed",name:"onChange",required:!1,type:{name:"ChangeEventHandler<HTMLSelectElement>"}}}}}catch{}try{combobox.displayName="combobox",combobox.__docgenInfo={description:"A combo box helps users select an item from a large list of options.",displayName:"combobox",props:{id:{defaultValue:null,description:`The unique identifier for this component
The unique identifier for the select`,name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:`The name for the combo box input field
The name of the select`,name:"name",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"The placeholder value to display in the control",name:"placeholder",required:!1,type:{name:"string"}},defaultOption:{defaultValue:null,description:"The default option of the select",name:"defaultOption",required:!1,type:{name:"SelectOptionProps"}},options:{defaultValue:null,description:"The options of the select",name:"options",required:!1,type:{name:"SelectOptionProps[]"}},children:{defaultValue:null,description:"SelectOption components to display as children",name:"children",required:!1,type:{name:"(ReactElement<SelectOptionProps, string | JSXElementConstructor<any>> | ReactElement<SelectOptionProps, string | JSXElementConstructor<...>>[]) & ReactNode"}},onChange:{defaultValue:null,description:"Event handler for when value of the select is changed",name:"onChange",required:!1,type:{name:"ChangeEventHandler<HTMLSelectElement>"}}}}}catch{}export{K as C,W as c,He as s};
