import{g as B}from"./_commonjsHelpers-Cpj98o6Y.js";import{k as C,s as P}from"./select-or-matches-C9E_1WAJ.js";import{a as k,d as w,e as q,b as T,s as x,c as U}from"./config-BpWtFwiV.js";import{a as H}from"./active-element-CTMAq7ve.js";var F=function(e,t){return function(a){if(e!==a.target&&!e.contains(a.target))return t.call(this,a)}},V={behavior:k,delegate:w,delegateAll:q,ignore:F,keymap:C};const{keymap:j}=V,Y=T,W=x,m=H,G='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]',X=r=>{const e=W(G,r),t=e[0],o=e[e.length-1];function a(s){m()===o&&(s.preventDefault(),t.focus())}function i(s){m()===t?(s.preventDefault(),o.focus()):e.includes(m())||(s.preventDefault(),t.focus())}return{firstTabStop:t,lastTabStop:o,tabAhead:a,tabBack:i}};var z=(r,e={})=>{const t=X(r),o=e,{Esc:a,Escape:i}=o;i&&!a&&(o.Esc=i);const s=j({Tab:t.tabAhead,"Shift+Tab":t.tabBack,...e});return Y({keydown:s},{init(){t.firstTabStop&&t.firstTabStop.focus()},update(f){f?this.on():this.off()}})},J=function(){const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const o=`${e.offsetWidth-t.offsetWidth}px`;return e.parentNode.removeChild(e),o};const b=P,S=z,K=J,Q=T,{prefix:Z}=U,u=`${Z}-modal`,D=`${u}-overlay`,n=`${u}-wrapper`,O="data-open-modal",h="data-close-modal",A="data-force-action",g="data-modal-hidden",L=`.${u}`,$=`.${n} *[data-focus]`,_=`${n} *[${h}]`,tt=`*[${O}][aria-controls]`,et=`${_}, .${D}:not([${A}])`,ot=`body > *:not(.${n}):not([aria-hidden])`,rt=`[${g}]`,N="usa-js-modal--active",at="usa-js-no-click",E="is-visible",M="is-hidden";let c,I,y;const st=()=>document.body.classList.contains(N),it=K(),ct=()=>{c.toggleModal.call(c,!1)},nt=()=>{I=window.getComputedStyle(document.body).getPropertyValue("padding-right"),y=`${parseInt(I.replace(/px/,""),10)+parseInt(it.replace(/px/,""),10)}px`};function p(r){let e,t=r.target;const{body:o}=document,a=!st(),i=t?t.getAttribute("aria-controls"):document.querySelector(`.${n}.${E}`),s=a?document.getElementById(i):document.querySelector(`.${n}.${E}`);if(!s)return!1;const l=s.querySelector($)?s.querySelector($):s.querySelector(`.${u}`),f=document.getElementById(s.getAttribute("data-opener")),R=o.querySelector(tt),v=s.getAttribute(A);return r.type==="keydown"&&s!==null&&(t=s.querySelector(_)),t&&(t.hasAttribute(O)&&(this.getAttribute("id")===null?(e=`modal-${Math.floor(Math.random()*9e5)+1e5}`,this.setAttribute("id",e)):e=this.getAttribute("id"),s.setAttribute("data-opener",e)),t.closest(`.${u}`)&&!(t.hasAttribute(h)||t.closest(`[${h}]`)))?!1:(o.classList.toggle(N,a),s.classList.toggle(E,a),s.classList.toggle(M,!a),v&&o.classList.toggle(at,a),o.style.paddingRight===y?o.style.removeProperty("padding-right"):o.style.paddingRight=y,a&&l?(v?c.focusTrap=S(s):c.focusTrap=S(s,{Escape:ct}),c.focusTrap.update(a),l.focus(),document.querySelectorAll(ot).forEach(d=>{d.setAttribute("aria-hidden","true"),d.setAttribute(g,"")})):!a&&R&&f&&(document.querySelectorAll(rt).forEach(d=>{d.removeAttribute("aria-hidden"),d.removeAttribute(g)}),f.focus(),c.focusTrap.update(a)),a)}const lt=r=>{const e=r.getAttribute("id"),t=document.createElement("div"),o=Array.from(r.attributes);return nt(),t.setAttribute("data-placeholder-for",e),t.style.display="none",t.setAttribute("aria-hidden","true"),o.forEach(a=>{t.setAttribute(`data-original-${a.name}`,a.value)}),t},dt=(r,e)=>{const t=r.getAttribute("id"),o=r.getAttribute("aria-labelledby"),a=r.getAttribute("aria-describedby"),i=r.hasAttribute(A);if(!o)throw new Error(`${t} is missing aria-labelledby attribute`);if(!a)throw new Error(`${t} is missing aria-desribedby attribute`);return e.setAttribute("role","dialog"),e.setAttribute("id",t),e.setAttribute("aria-labelledby",o),e.setAttribute("aria-describedby",a),i&&e.setAttribute(A,i),e.querySelectorAll(et).forEach(l=>{l.setAttribute("aria-controls",t)}),r.removeAttribute("id"),r.removeAttribute("aria-labelledby"),r.removeAttribute("aria-describedby"),r.setAttribute("tabindex","-1"),e},ut=r=>{const e=r,t=document.createElement("div"),o=document.createElement("div");return t.classList.add(M,n),o.classList.add(D),t.append(o),o.append(e),dt(e,t),t},ft=r=>{if(!r.getAttribute("id"))throw new Error("Modal markup is missing ID");const t=lt(r);r.after(t);const o=ut(r);document.body.appendChild(o)},bt=r=>{const e=r,t=e.parentElement.parentElement,o=t.getAttribute("id");if(!o)return;const a=document.querySelector(`[data-placeholder-for="${o}"]`);a&&(Array.from(a.attributes).forEach(s=>{s.name.startsWith("data-original-")&&e.setAttribute(s.name.substr(14),s.value)}),a.after(e),a.parentElement.removeChild(a)),t.parentElement.removeChild(t)};c=Q({},{init(r){b(L,r).forEach(e=>{const t=e.id;ft(e),b(`[aria-controls="${t}"]`,document).forEach(o=>{o.nodeName==="A"&&(o.setAttribute("role","button"),o.addEventListener("click",a=>a.preventDefault())),o.addEventListener("click",p)})})},teardown(r){b(L,r).forEach(e=>{const t=e.id;bt(e),b(`[aria-controls="${t}"]`,document).forEach(o=>o.removeEventListener("click",p))})},focusTrap:null,toggleModal:p});var At=c;const gt=B(At);export{z as f,gt as m,J as s};
