import{j as me}from"./jsx-runtime-BjgbQsUx.js";import{g as Ee}from"./_commonjsHelpers-Cpj98o6Y.js";import{a as $e,r as ye}from"./select-or-matches-Ry_FXvm3.js";import{r as Le,a as ve,b as be}from"./config-jVN7-cmM.js";import{r as Ce}from"./sanitizer-BDKKlE4O.js";import{r as Ae}from"./index-DDT2H6na.js";import{F as Te}from"./form-group-CsH8EhgF.js";import{r as Ne,a as Ie}from"./index-ULqyV3G8.js";import{r as qe,a as Re}from"./index-B10PtKfh.js";import{r as Pe}from"./events-CleOcHg4.js";var pe,ge;function De(){if(ge)return pe;ge=1;const h=$e(),O=Le(),E=Ce(),{prefix:i}=ve(),_=`${i}-file-input`,A=`.${_}`,q=`${i}-file-input__input`,$=`${i}-file-input__target`,c=`.${q}`,Q=`${i}-file-input__box`,F=`${i}-file-input__instructions`,S=`${i}-file-input__preview`,W=`${i}-file-input__preview-heading`,y=`${i}-file-input--disabled`,J=`${i}-file-input__choose`,x=`${i}-file-input__accepted-files-message`,U=`${i}-file-input__drag-text`,R=`${i}-file-input--drag`,B="is-loading",P="has-invalid-file",b=`${i}-file-input__preview-image`,ee=`${b}--generic`,te=`${b}--pdf`,se=`${b}--word`,ne=`${b}--video`,j=`${b}--excel`,Y=`${i}-sr-only`,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let p=!0,L="",D="";const C=e=>{const t=e.closest(A);if(!t)throw new Error(`Element is missing outer ${A}`);const s=t.querySelector(c);return{dropZoneEl:t,inputEl:s}},re=e=>{const{dropZoneEl:t,inputEl:s}=C(e);s.disabled=!0,t.classList.add(y)},k=e=>{const{dropZoneEl:t}=C(e);t.classList.add(y)},X=e=>{const{dropZoneEl:t,inputEl:s}=C(e);s.disabled=!1,t.classList.remove(y),t.removeAttribute("aria-disabled")},ae=e=>{const t=e.charCodeAt(0);return t===32?"-":t>=65&&t<=90?`img_${e.toLowerCase()}`:`__${t.toString(16).slice(-4)}`},oe=e=>e.replace(/[^a-z0-9]/g,ae),ie=e=>`${e}-${Math.floor(Date.now().toString()/1e3)}`,Z=e=>e.hasAttribute("multiple")?"files":"file",ce=e=>{const t=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div");return e.classList.remove(_),e.classList.add(q),t.classList.add(_),r.classList.add(Q),s.classList.add($),s.prepend(r),e.parentNode.insertBefore(s,e),e.parentNode.insertBefore(t,s),s.appendChild(e),t.appendChild(s),s},M=e=>{const t=e.closest(A),s=Z(e),r=document.createElement("div"),a=`Drag ${s} here or`,m="choose from folder";return L=`${a} ${m}`,r.classList.add(F),r.setAttribute("aria-hidden","true"),e.setAttribute("aria-label",L),r.innerHTML=E.escapeHTML`<span class="${U}">${a}</span> <span class="${J}">${m}</span>`,e.parentNode.insertBefore(r,e),(/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.querySelector(`.${U}`).outerHTML=""),r},H=e=>{const t=document.createElement("div"),s=Z(e),r=e.closest(A),a=e.closest(`.${$}`);D=`No ${s} selected.`,t.classList.add(Y),t.setAttribute("aria-live","polite"),t.textContent=D,r.insertBefore(t,a)},le=e=>{const t=e.hasAttribute("aria-disabled")||e.hasAttribute("disabled"),s=ce(e),r=M(e),{dropZoneEl:a}=C(e);return t?a.classList.add(y):H(e),{instructions:r,dropTarget:s}},w=(e,t)=>{const s=e.querySelectorAll(`.${S}`),r=e.querySelector(`.${W}`),a=e.querySelector(`.${x}`),m=l=>{l.parentNode.removeChild(l)};r&&(r.outerHTML=""),a&&(a.outerHTML="",e.classList.remove(P)),s!==null&&(t&&t.removeAttribute("hidden"),Array.prototype.forEach.call(s,m))},de=(e,t,s)=>{const r=e;let a=D;t.length===1?a=`You have selected the file: ${s}`:t.length>1&&(a=`You have selected ${t.length} files: ${s.join(", ")}`),setTimeout(()=>{r.textContent=a},1e3)},ue=(e,t)=>{const s=document.createElement("div"),r=e.closest(`.${$}`),a=r.querySelector(`.${F}`);let m="Change file",l="";t.length===1?l=E.escapeHTML`Selected file <span class="usa-file-input__choose">${m}</span>`:t.length>1&&(m="Change files",l=E.escapeHTML`${t.length} files selected <span class="usa-file-input__choose">${m}</span>`),a.setAttribute("hidden","true"),s.classList.add(W),s.innerHTML=l,r.insertBefore(s,a),e.setAttribute("aria-label",m)},n=(e,t)=>{e.addEventListener("error",()=>{const s=e;s.src=u,s.classList.add(t)},{once:!0})},o=(e,t,s,r)=>{const a=e.target.files,l=r.closest(`.${_}`).querySelector(`.${Y}`),T=[];w(r,s);for(let d=0;d<a.length;d+=1){const N=new FileReader,I=a[d].name;let V;T.push(I),N.onloadstart=function(){V=ie(oe(I)),s.insertAdjacentHTML("afterend",E.escapeHTML`<div class="${S}" aria-hidden="true">
          <img id="${V}" src="${u}" alt="" class="${b} ${B}"/>${I}
        <div>`)},N.onloadend=function(){const g=document.getElementById(V),v=I.split(".").pop();v==="pdf"?n(g,te):v==="doc"||v==="docx"||v==="pages"?n(g,se):v==="xls"||v==="xlsx"||v==="numbers"?n(g,j):v==="mov"||v==="mp4"?n(g,ne):n(g,ee),g.classList.remove(B),g.src=N.result},a[d]&&N.readAsDataURL(a[d])}a.length===0?t.setAttribute("aria-label",L):ue(t,a),de(l,a,T)},f=(e,t,s,r)=>{const a=t.getAttribute("accept");r.classList.remove(P);const m=(l,T)=>{let d=!1;return l.indexOf(T)>=0&&(d=!0),d};if(a){const l=a.split(","),T=document.createElement("div");let d=!0;const N=e.target.files||e.dataTransfer.files;for(let I=0;I<N.length;I+=1){const V=N[I];if(d)for(let G=0;G<l.length;G+=1){const g=l[G];if(d=V.name.indexOf(g)>0||m(V.type,g.replace(/\*/g,"")),d){p=!0;break}}else break}d||(w(r,s),t.value="",r.insertBefore(T,t),T.textContent=t.dataset.errormessage||"This is not a valid file type.",T.classList.add(x),r.classList.add(P),p=!1,e.preventDefault(),e.stopPropagation())}},z=(e,t,s,r)=>{f(e,t,s,r),p===!0&&o(e,t,s,r)};return pe=O({},{init(e){h(A,e).forEach(t=>{const{instructions:s,dropTarget:r}=le(t);r.addEventListener("dragover",function(){this.classList.add(R)},!1),r.addEventListener("dragleave",function(){this.classList.remove(R)},!1),r.addEventListener("drop",function(){this.classList.remove(R)},!1),t.addEventListener("change",a=>z(a,t,s,r),!1)})},teardown(e){h(c,e).forEach(t=>{const s=t.parentElement.parentElement;s.parentElement.replaceChild(t,s),t.className=_})},getFileInputContext:C,disable:re,ariaDisable:k,enable:X}),pe}var we=De();const he=Ee(we),_e=({id:h,required:O,label:E,helperText:i,errors:_,...A})=>{const q=Ae.useRef(null);return Ae.useLayoutEffect(()=>{const $=q.current;return he.on($),()=>he.off($)},[]),me.jsx(Te,{id:`form-group-${h}`,required:O,label:E,helperText:i,errors:_,fieldControl:me.jsx("input",{className:"usa-file-input",type:"file",ref:q,id:h,...A})})};try{_e.displayName="FileInput",_e.__docgenInfo={description:"File input allows users to attach one or multiple files.",displayName:"FileInput",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name for the file input field",name:"name",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"A boolean indicating whether or not the field is required",name:"required",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Label text to display with the input",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text to display with the input",name:"helperText",required:!1,type:{name:"string"}},errors:{defaultValue:null,description:"An array of string error messages",name:"errors",required:!1,type:{name:"string | string[]"}}}}}catch{}try{fileinput.displayName="fileinput",fileinput.__docgenInfo={description:"File input allows users to attach one or multiple files.",displayName:"fileinput",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name for the file input field",name:"name",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"A boolean indicating whether or not the field is required",name:"required",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Label text to display with the input",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text to display with the input",name:"helperText",required:!1,type:{name:"string"}},errors:{defaultValue:null,description:"An array of string error messages",name:"errors",required:!1,type:{name:"string | string[]"}}}}}catch{}var fe,Se;function xe(){if(Se)return fe;Se=1;const h=ye(),O=Le(),E=be(),i=Ie(),_=qe(),A=Ne(),q=Re(),{CLICK:$}=Pe(),{prefix:c}=ve(),Q="body",F=`.${c}-header`,S=`.${c}-nav`,W=`.${c}-nav-container`,y=`.${c}-nav__primary`,J=`.${c}-nav__primary-item`,x=`button.${c}-nav__link`,U=`${S} a`,R="data-nav-hidden",B=`.${c}-menu-btn`,P=`.${c}-nav__close`,b=`.${c}-overlay`,ee=`${P}, .${c}-overlay`,te=[S,b].join(", "),se=`body *:not(${F}, ${W}, ${S}, ${S} *):not([aria-hidden])`,ne=`[${R}]`,j="usa-js-mobile-nav--active",Y="is-visible";let u,p,L;const D=()=>document.body.classList.contains(j),C=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),re=q(),k=window.getComputedStyle(document.body).getPropertyValue("padding-right"),X=`${parseInt(k.replace(/px/,""),10)+parseInt(re.replace(/px/,""),10)}px`,ae=()=>{const n=document.querySelector(`${F}`).parentNode;L=document.querySelectorAll(se),L.forEach(o=>{o!==n&&(o.setAttribute("aria-hidden",!0),o.setAttribute(R,""))})},oe=()=>{L=document.querySelectorAll(ne),L&&L.forEach(n=>{n.removeAttribute("aria-hidden"),n.removeAttribute(R)})},ie=n=>{n?ae():oe()},Z=()=>{C&&document.body.classList.add("is-safari")},ce=n=>{const o=`-${window.scrollY}px`;C&&n.style.setProperty("--scrolltop",o)},M=n=>{const{body:o}=document,f=typeof n=="boolean"?n:!D();ce(o),o.classList.toggle(j,f),E(te).forEach(e=>e.classList.toggle(Y,f)),u.focusTrap.update(f);const z=o.querySelector(P),K=document.querySelector(B);return o.style.paddingRight=o.style.paddingRight===X?k:X,ie(f),f&&z?z.focus():!f&&K&&getComputedStyle(K).display!=="none"&&K.focus(),f},H=()=>{const n=document.body.querySelector(P);D()&&n&&n.getBoundingClientRect().width===0&&u.toggleNav.call(n,!1)},le=()=>u.toggleNav.call(u,!1),w=()=>{p&&(i(p,!1),p=null)},de=n=>{const o=n.target.closest(J);if(!n.target.matches(x)){const f=o.querySelector(x);f&&f.focus()}},ue=n=>{w(),de(n)};return u=O({[$]:{[x](){return p!==this&&w(),p||(p=this,i(p,!0)),!1},[Q]:w,[B]:M,[ee]:M,[U](){const n=this.closest(A.ACCORDION);n&&A.getButtons(n).forEach(o=>A.hide(o)),D()&&u.toggleNav.call(u,!1)}},keydown:{[y]:h({Escape:ue})},focusout:{[y](n){n.target.closest(y).contains(n.relatedTarget)||w()}}},{init(n){const o=n.matches(S)?n:n.querySelector(S);o&&(u.focusTrap=_(o,{Escape:le})),Z(),H(),window.addEventListener("resize",H,!1)},teardown(){window.removeEventListener("resize",H,!1),p=!1},focusTrap:null,toggleNav:M}),fe=u,fe}xe();export{_e as F};
