import{j as D}from"./jsx-runtime-CKrituN3.js";import{r as C}from"./index-CBqU2yxZ.js";import{g as V}from"./_commonjsHelpers-BosuxZz1.js";import{k as G}from"./index-D6IA0wpC.js";import{s as j}from"./select-or-matches-Bu-g4rUn.js";import{b as q,c as H}from"./config-BXli1stc.js";import{i as U}from"./is-in-viewport-B5ZZJcwh.js";const F=G,y=j,Y=q,{prefix:p}=H,m=U,J="body",E=`.${p}-tooltip`,O=`.${p}-tooltip__trigger`,X=`${p}-tooltip__trigger`,T=`${p}-tooltip`,f=`${p}-tooltip__body`,_="is-set",R="is-visible",b=5,W=`${p}-tooltip__body--wrap`,L=t=>{const e=t.parentNode,i=e.querySelector(`.${f}`);return{trigger:t,wrapper:e,body:i}},M=(t,e,i)=>{t.setAttribute("aria-hidden","false"),t.classList.add(_);const n=s=>{t.classList.remove(`${f}--top`),t.classList.remove(`${f}--bottom`),t.classList.remove(`${f}--right`),t.classList.remove(`${f}--left`),t.classList.add(`${f}--${s}`)},o=s=>{s.style.top=null,s.style.bottom=null,s.style.right=null,s.style.left=null,s.style.margin=null},l=(s,a)=>parseInt(window.getComputedStyle(s).getPropertyValue(a),10),r=(s,a,c)=>l(c,`margin-${s}`)>0?a-l(c,`margin-${s}`):a,$=s=>{o(s);const a=r("top",s.offsetHeight,e),c=r("left",s.offsetWidth,e);n("top"),s.style.left="50%",s.style.top=`-${b}px`,s.style.margin=`-${a}px 0 0 -${c/2}px`},h=s=>{o(s);const a=r("left",s.offsetWidth,e);n("bottom"),s.style.left="50%",s.style.margin=`${b}px 0 0 -${a/2}px`},S=s=>{o(s);const a=r("top",s.offsetHeight,e);n("right"),s.style.top="50%",s.style.left=`${e.offsetLeft+e.offsetWidth+b}px`,s.style.margin=`-${a/2}px 0 0 0`},I=s=>{o(s);const a=r("top",s.offsetHeight,e),c=r("left",e.offsetLeft>s.offsetWidth?e.offsetLeft-s.offsetWidth:s.offsetWidth,e);n("left"),s.style.top="50%",s.style.left=`-${b}px`,s.style.margin=`-${a/2}px 0 0 ${e.offsetLeft>s.offsetWidth?c:-c}px`},k=2;function u(s,a=1){const c=[$,h,S,I];let v=!1;function w(A){if(A<c.length){const N=c[A];N(s),m(s)?v=!0:w(A+=1)}}w(0),v||(s.classList.add(W),a<=k&&u(s,a+=1))}switch(i){case"top":$(t),m(t)||u(t);break;case"bottom":h(t),m(t)||u(t);break;case"right":S(t),m(t)||u(t);break;case"left":I(t),m(t)||u(t);break}setTimeout(()=>{t.classList.add(R)},20)},d=t=>{t.classList.remove(R),t.classList.remove(_),t.classList.remove(W),t.setAttribute("aria-hidden","true")},x=t=>{const e=`tooltip-${Math.floor(Math.random()*9e5)+1e5}`,i=t.getAttribute("title"),n=document.createElement("span"),o=document.createElement("span"),l=t.getAttribute("data-classes");let r=t.getAttribute("data-position");return r||(r="top",t.setAttribute("data-position",r)),t.setAttribute("aria-describedby",e),t.setAttribute("tabindex","0"),t.removeAttribute("title"),t.classList.remove(T),t.classList.add(X),t.parentNode.insertBefore(n,t),n.appendChild(t),n.classList.add(T),n.appendChild(o),l&&l.split(" ").forEach(h=>n.classList.add(h)),o.classList.add(f),o.setAttribute("id",e),o.setAttribute("role","tooltip"),o.setAttribute("aria-hidden","true"),o.textContent=i,{tooltipBody:o,position:r,tooltipContent:i,wrapper:n}},Z=()=>{const t=y(`.${f}.${_}`);t&&t.forEach(e=>d(e))},g=Y({"mouseover focusin":{[E](t){const e=t.target;e.nodeName==="BUTTON"&&e.hasAttribute("title")&&x(e)},[O](t){const{trigger:e,body:i}=L(t.target);M(i,e,e.dataset.position)}},focusout:{[O](t){const{body:e}=L(t.target);d(e)}},keydown:{[J]:F({Escape:Z})}},{init(t){y(E,t).forEach(e=>{x(e);const{body:i,wrapper:n}=L(e);n.addEventListener("mouseleave",()=>d(i))})},teardown(t){y(E,t).forEach(e=>{e.removeEventListener("mouseleave",d)})},setup:x,getTooltipElements:L,show:M,hide:d});var z=g;const P=V(z),K=({label:t,position:e="top",children:i})=>{const n=C.useRef(null);return C.useLayoutEffect(()=>{var l;const o=(l=n.current)==null?void 0:l.firstChild;return o&&(o.classList.add("usa-tooltip"),o.title=t,o.setAttribute("data-position",e),P.on(o)),()=>P.off(o)}),D.jsx("span",{ref:n,children:i})};K.__docgenInfo={description:"A tooltip is a short descriptive message that appears when a user hovers or focuses on an element.",methods:[],displayName:"Tooltip",props:{label:{required:!0,tsType:{name:"string"},description:"The text value to display in the tooltip"},position:{required:!1,tsType:{name:"union",raw:"'top' | 'right' | 'bottom' | 'left'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'left'"}]},description:"Where the tooltip will display in reference to its child",defaultValue:{value:"'top'",computed:!1}},children:{required:!0,tsType:{name:"ReactNode"},description:"The contents of the tooltip"}}};export{K as T};
