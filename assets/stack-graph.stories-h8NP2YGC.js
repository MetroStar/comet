import{j as _}from"./jsx-runtime--26OcTxz.js";import{R as i}from"./index-BLgStI3F.js";import{u as q,m as P,d as $,v as F,x as Q,y as Z,z as ee,_ as G,o as te,A as ne,V as oe,s as re}from"./data-Bdhjhrxz.js";import{b as se,c as ae,d as ce,e as I,f as R,h as ie,u as le,i as me,j as pe,k as ue,V as de}from"./victory-chart-Dy0uE8UT.js";import{V as ye}from"./victory-area-BE_c5nC2.js";import"./_commonjsHelpers-BosuxZz1.js";import"./_baseAssignValue-C-YtspGc.js";import"./isPlainObject-BpwBpDME.js";import"./pickBy-DN9OZ1gh.js";import"./line-helpers-CjXpAhUM.js";import"./arc-HBYzQ_7A.js";import"./pie-Bnf5nD2v.js";import"./default-transitions-BfLJ9QZ-.js";const U={width:450,height:300,padding:50};function he(e,r){const{fillInMissingData:n}=e,o=r.reduce((s,m)=>(m.forEach(p=>{s[p._x instanceof Date?p._x.getTime():p._x]=!0}),s),{}),t=Object.keys(o).map(s=>Number(s)),l=ee(t);return r.map(s=>{let m=0;const p=s[0]&&s[0]._x instanceof Date;return l.map((c,d)=>{let u=Number(c);const y=s[d-m];if(y){if((p?y._x.getTime():y._x)===u)return y;m++;const g=n?0:null;return u=p?new Date(u):u,{x:u,y:g,_x:u,_y:g}}const h=n?0:null;return u=p?new Date(u):u,{x:u,y:h,_x:u,_y:h}})})}function fe(e,r,n){if(e.y0)return e.y0;const o=e._y,t=e._group,l=n[0].map(a=>a.y0),m=n.slice(0,r).reduce((a,c)=>a.concat(c.filter(d=>e._x instanceof Date?d._x.getTime()===e._x.getTime():d._x===e._x).map(d=>d._y||0)),[]),p=m.length&&m.reduce((a,c)=>o<0&&c<0||o>=0&&c>=0?Number(c)+a:a,l[t]||0);return m.some(a=>a instanceof Date)?new Date(p):p}function ge(e,r,n){const o=e.xOffset||0;return r[n].map(t=>{const l=fe(t,n,r)||0;return Object.assign({},t,{_y0:t._y instanceof Date?l?new Date(l):t._y:l,_y1:t._y===null?null:t._y instanceof Date?new Date(Number(t._y)+Number(l)):t._y+l,_x1:t._x===null?null:t._x instanceof Date?new Date(Number(t._x)+Number(o)):t._x+o})})}function xe(e,r){const o=ie(e,r).map(l=>l.filter(s=>s._x!==null&&s._y!==null)),t=he(e,o);return t.map((l,s)=>ge(e,t,s))}function W(e,r){const n=r||i.Children.toArray(e.children),o="stack",t=P(e,U,o),l=ae(t.theme,t.style,o),s=t.categories||ce(t,n),m=t.datasets||xe(t,n),p=n.map((f,g)=>i.cloneElement(f,{data:m[g]})),a={x:I(Object.assign({},t,{categories:s}),"x",p),y:I(Object.assign({},t,{categories:s}),"y",p)},c=t.range||{x:$(t,"x"),y:$(t,"y")},d={x:F(t,"x")||R(t,"x"),y:F(t,"y")||R(t,"y")},u={x:d.x.domain(a.x).range(t.horizontal?c.y:c.x),y:d.y.domain(a.y).range(t.horizontal?c.x:c.y)},{colorScale:y,horizontal:h}=t;return{datasets:m,categories:s,range:c,domain:a,horizontal:h,scale:u,style:l,colorScale:y,role:o}}const _e=e=>{const{children:r}=e,n=i.Children.toArray(r).map(o=>{const t=o;return{...t,props:Q(t.props,["sharedEvents"])}});return e.children=n,e};function Ce(e){const r=_e(e),[n,o]=i.useState(r);return i.useEffect(()=>{q(r,n)||o(r)},[n,o,r]),i.useMemo(()=>W(n,n.children),[n])}function be(e,r,n){if(e.labels)return r.length===n+1?e.labels:void 0}function De(e,r){const{categories:n,domain:o,range:t,scale:l,horizontal:s}=r;return{height:e.height,width:e.width,padding:Z(e),standalone:!1,theme:e.theme,categories:n,domain:o,range:t,scale:l,horizontal:s}}function Se(e,r){const n=r.type&&r.type.role,o=r.props.colorScale||e.colorScale;if(!(n!=="group"&&n!=="stack"))return e.theme?o||e.theme.props.colorScale:o}function X(e,r,n){const o=P(e,U,"stack"),t=r||i.Children.toArray(o.children),l=n||W(o,t),{datasets:s}=l,m=De(o,l),p=o.name||"stack";return t.map((a,c)=>{const d=a.type&&a.type.role,u=s[c],y=se(a,c,l),h=o.labels?be(o,s,c):a.props.labels,f=a.props.name||`${p}-${d}-${c}`;return i.cloneElement(a,Object.assign({key:`${f}-key-${c}`,labels:h,name:f,domainPadding:a.props.domainPadding||o.domainPadding,theme:o.theme,labelComponent:o.labelComponent||a.props.labelComponent,style:y,colorScale:Se(o,a),data:u,polar:o.polar},m))})}const Pe={width:450,height:300,padding:50},Ee={containerComponent:i.createElement(oe,null),groupComponent:i.createElement("g",null),standalone:!0,theme:re.grayscale,fillInMissingData:!0},ke=e=>{const{role:r}=E,n=i.useMemo(()=>G({},e,Ee),[e]),{setAnimationState:o,getAnimationProps:t,getProps:l}=le(),s=l(n),m=P(s,Pe,r),{eventKey:p,containerComponent:a,standalone:c,groupComponent:d,externalEventMutations:u,width:y,height:h,theme:f,polar:g,horizontal:k,name:v}=m,w=i.Children.toArray(m.children),C=Ce(m),{domain:j,scale:M,style:O}=C,V=i.useMemo(()=>X(s,w,C).map((S,H)=>{const J=Object.assign({animate:t(s,S,H)},S.props);return i.cloneElement(S,J)}).reverse(),[s,w,C,t]),A=i.useMemo(()=>c?{domain:j,scale:M,width:y,height:h,standalone:c,theme:f,style:O.parent,horizontal:k,polar:g,name:v}:{},[c,j,M,y,h,f,O,k,g,v]),b=i.useMemo(()=>te(n),[n]),D=i.useMemo(()=>{if(c){const T=G({},a.props,A,b);return i.cloneElement(a,T)}return i.cloneElement(d,b)},[d,c,a,A,b]),N=i.useMemo(()=>me(s),[s]),z=pe(n);return i.useEffect(()=>()=>{n.animate&&o(z,n)},[o,z,n]),ne(N)?i.cloneElement(D,D.props,V):i.createElement(ue,{container:D,eventKey:p,events:N,externalEventMutations:u},V)},ve={role:"stack",expectedComponents:["groupComponent","containerComponent","labelComponent"],getChildren:X},E=Object.assign(i.memo(ke,q),ve);E.displayName="VictoryStack";const Y=e=>_.jsx(de,{...e.chart,children:_.jsx(E,{children:e.data.map((r,n)=>_.jsx(ye,{style:{data:{fill:e.colors?e.colors[n]?e.colors[n]:e.colors[0]:"#0d7ea2"}},data:r,interpolation:e.smooth&&e.smooth?"natural":void 0,animate:{duration:2e3,onLoad:{duration:1e3}}},`stack-${n}`))})}),Ke={title:"Data Viz/Stack Graph",component:Y,argTypes:{smooth:{control:"boolean"}}},we=e=>_.jsx("div",{style:{width:"600px",height:"400px"},children:_.jsx(Y,{...e})}),x=we.bind({});x.args={chart:{title:"Stack graph",width:600,height:400},colors:["#0d7ea2","#cd425b"],data:[[{x:0,y:3},{x:1,y:9},{x:2,y:5},{x:3,y:12},{x:4,y:6},{x:5,y:10}],[{x:0,y:1},{x:1,y:4},{x:2,y:7},{x:3,y:2},{x:4,y:5},{x:5,y:7}]],smooth:!1};var B,K,L;x.parameters={...x.parameters,docs:{...(B=x.parameters)==null?void 0:B.docs,source:{originalSource:`(args: StackGraphProps) => <div style={{
  width: '600px',
  height: '400px'
}}>
    <StackGraph {...args} />
  </div>`,...(L=(K=x.parameters)==null?void 0:K.docs)==null?void 0:L.source}}};const Le=["Default"];export{x as Default,Le as __namedExportsOrder,Ke as default};
