import{j as W}from"./jsx-runtime-DPda6Ybg.js";import{g as Ae}from"./_commonjsHelpers-Cpj98o6Y.js";import{s as ge,k as he}from"./select-or-matches-C9E_1WAJ.js";import{b as K,c as Q,s as _e}from"./config-BpWtFwiV.js";import{s as Le}from"./sanitizer-BtXph-xc.js";import{r as U}from"./index-DhrokLn_.js";import{F as Se}from"./form-group-xsfonisk.js";import{t as ve,s as Ee}from"./index-a0hvGR0d.js";import{s as $e,f as ye}from"./index-DTujk8nr.js";import{e as be}from"./events-C6LRLXdn.js";const j=ge,Ce=K,N=Le,{prefix:i}=Q,$=`${i}-file-input`,y=`.${$}`,J=`${i}-file-input__input`,M=`${i}-file-input__target`,ee=`.${J}`,Ne=`${i}-file-input__box`,te=`${i}-file-input__instructions`,se=`${i}-file-input__preview`,ne=`${i}-file-input__preview-heading`,T=`${i}-file-input--disabled`,Te=`${i}-file-input__choose`,oe=`${i}-file-input__accepted-files-message`,Y=`${i}-file-input__drag-text`,I=`${i}-file-input--drag`,k="is-loading",w="has-invalid-file",L=`${i}-file-input__preview-image`,Ie=`${L}--generic`,Re=`${L}--pdf`,Pe=`${L}--word`,xe=`${L}--video`,De=`${L}--excel`,ae=`${i}-sr-only`,re="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let V=!0,O="",q="";const b=e=>{const t=e.closest(y);if(!t)throw new Error(`Element is missing outer ${y}`);const s=t.querySelector(ee);return{dropZoneEl:t,inputEl:s}},we=e=>{const{dropZoneEl:t,inputEl:s}=b(e);s.disabled=!0,t.classList.add(T)},Ve=e=>{const{dropZoneEl:t}=b(e);t.classList.add(T)},Oe=e=>{const{dropZoneEl:t,inputEl:s}=b(e);s.disabled=!1,t.classList.remove(T),t.removeAttribute("aria-disabled")},qe=e=>{const t=e.charCodeAt(0);return t===32?"-":t>=65&&t<=90?`img_${e.toLowerCase()}`:`__${t.toString(16).slice(-4)}`},Fe=e=>e.replace(/[^a-z0-9]/g,qe),Me=e=>`${e}-${Math.floor(Date.now().toString()/1e3)}`,ie=e=>e.hasAttribute("multiple")?"files":"file",Be=e=>{const t=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div");return e.classList.remove($),e.classList.add(J),t.classList.add($),n.classList.add(Ne),s.classList.add(M),s.prepend(n),e.parentNode.insertBefore(s,e),e.parentNode.insertBefore(t,s),s.appendChild(e),t.appendChild(s),s},He=e=>{const t=e.closest(y),s=ie(e),n=document.createElement("div"),o=`Drag ${s} here or`,a="choose from folder";return O=`${o} ${a}`,n.classList.add(te),n.setAttribute("aria-hidden","true"),e.setAttribute("aria-label",O),n.innerHTML=N.escapeHTML`<span class="${Y}">${o}</span> <span class="${Te}">${a}</span>`,e.parentNode.insertBefore(n,e),(/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.querySelector(`.${Y}`).outerHTML=""),n},Ge=e=>{const t=document.createElement("div"),s=ie(e),n=e.closest(y),o=e.closest(`.${M}`);q=`No ${s} selected.`,t.classList.add(ae),t.setAttribute("aria-live","polite"),t.textContent=q,n.insertBefore(t,o)},We=e=>{const t=e.hasAttribute("aria-disabled")||e.hasAttribute("disabled"),s=Be(e),n=He(e),{dropZoneEl:o}=b(e);return t?o.classList.add(T):Ge(e),{instructions:n,dropTarget:s}},le=(e,t)=>{const s=e.querySelectorAll(`.${se}`),n=e.querySelector(`.${ne}`),o=e.querySelector(`.${oe}`),a=r=>{r.parentNode.removeChild(r)};n&&(n.outerHTML=""),o&&(o.outerHTML="",e.classList.remove(w)),s!==null&&(t&&t.removeAttribute("hidden"),Array.prototype.forEach.call(s,a))},Ue=(e,t,s)=>{const n=e;let o=q;t.length===1?o=`You have selected the file: ${s}`:t.length>1&&(o=`You have selected ${t.length} files: ${s.join(", ")}`),setTimeout(()=>{n.textContent=o},1e3)},je=(e,t)=>{const s=document.createElement("div"),n=e.closest(`.${M}`),o=n.querySelector(`.${te}`);let a="Change file",r="";t.length===1?r=N.escapeHTML`Selected file <span class="usa-file-input__choose">${a}</span>`:t.length>1&&(a="Change files",r=N.escapeHTML`${t.length} files selected <span class="usa-file-input__choose">${a}</span>`),o.setAttribute("hidden","true"),s.classList.add(ne),s.innerHTML=r,n.insertBefore(s,o),e.setAttribute("aria-label",a)},v=(e,t)=>{e.addEventListener("error",()=>{const s=e;s.src=re,s.classList.add(t)},{once:!0})},Ye=(e,t,s,n)=>{const o=e.target.files,r=n.closest(`.${$}`).querySelector(`.${ae}`),c=[];le(n,s);for(let l=0;l<o.length;l+=1){const f=new FileReader,m=o[l].name;let h;c.push(m),f.onloadstart=function(){h=Me(Fe(m)),s.insertAdjacentHTML("afterend",N.escapeHTML`<div class="${se}" aria-hidden="true">
          <img id="${h}" src="${re}" alt="" class="${L} ${k}"/>${m}
        <div>`)},f.onloadend=function(){const d=document.getElementById(h),p=m.split(".").pop();p==="pdf"?v(d,Re):p==="doc"||p==="docx"||p==="pages"?v(d,Pe):p==="xls"||p==="xlsx"||p==="numbers"?v(d,De):p==="mov"||p==="mp4"?v(d,xe):v(d,Ie),d.classList.remove(k),d.src=f.result},o[l]&&f.readAsDataURL(o[l])}o.length===0?t.setAttribute("aria-label",O):je(t,o),Ue(r,o,c)},ke=(e,t,s,n)=>{const o=t.getAttribute("accept");n.classList.remove(w);const a=(r,c)=>{let l=!1;return r.indexOf(c)>=0&&(l=!0),l};if(o){const r=o.split(","),c=document.createElement("div");let l=!0;const f=e.target.files||e.dataTransfer.files;for(let m=0;m<f.length;m+=1){const h=f[m];if(l)for(let S=0;S<r.length;S+=1){const d=r[S];if(l=h.name.indexOf(d)>0||a(h.type,d.replace(/\*/g,"")),l){V=!0;break}}else break}l||(le(n,s),t.value="",n.insertBefore(c,t),c.textContent=t.dataset.errormessage||"This is not a valid file type.",c.classList.add(oe),n.classList.add(w),V=!1,e.preventDefault(),e.stopPropagation())}},Xe=(e,t,s,n)=>{ke(e,t,s,n),V===!0&&Ye(e,t,s,n)},Ze=Ce({},{init(e){j(y,e).forEach(t=>{const{instructions:s,dropTarget:n}=We(t);n.addEventListener("dragover",function(){this.classList.add(I)},!1),n.addEventListener("dragleave",function(){this.classList.remove(I)},!1),n.addEventListener("drop",function(){this.classList.remove(I)},!1),t.addEventListener("change",o=>Xe(o,t,s,n),!1)})},teardown(e){j(ee,e).forEach(t=>{const s=t.parentElement.parentElement;s.parentElement.replaceChild(t,s),t.className=$})},getFileInputContext:b,disable:we,ariaDisable:Ve,enable:Oe});var ze=Ze;const X=Ae(ze),Z=({id:e,required:t,label:s,helperText:n,errors:o,...a})=>{const r=U.useRef(null);return U.useLayoutEffect(()=>{const c=r.current;return X.on(c),()=>X.off(c)},[]),W.jsx(Se,{id:`form-group-${e}`,required:t,label:s,helperText:n,errors:o,fieldControl:W.jsx("input",{className:"usa-file-input",type:"file",ref:r,id:e,...a})})};try{Z.displayName="FileInput",Z.__docgenInfo={description:"File input allows users to attach one or multiple files.",displayName:"FileInput",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name for the file input field",name:"name",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"A boolean indicating whether or not the field is required",name:"required",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Label text to display with the input",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text to display with the input",name:"helperText",required:!1,type:{name:"string"}},errors:{defaultValue:null,description:"An array of string error messages",name:"errors",required:!1,type:{name:"string | string[]"}}}}}catch{}try{fileinput.displayName="fileinput",fileinput.__docgenInfo={description:"File input allows users to attach one or multiple files.",displayName:"fileinput",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name for the file input field",name:"name",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"A boolean indicating whether or not the field is required",name:"required",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"Label text to display with the input",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text to display with the input",name:"helperText",required:!1,type:{name:"string"}},errors:{defaultValue:null,description:"An array of string error messages",name:"errors",required:!1,type:{name:"string | string[]"}}}}}catch{}const Ke=he,Qe=K,Je=_e,ce=ve,et=ye,R=Ee,tt=$e,{CLICK:st}=be,{prefix:u}=Q,nt="body",de=`.${u}-header`,_=`.${u}-nav`,ot=`.${u}-nav-container`,P=`.${u}-nav__primary`,at=`.${u}-nav__primary-item`,F=`button.${u}-nav__link`,rt=`${_} a`,B="data-nav-hidden",ue=`.${u}-menu-btn`,H=`.${u}-nav__close`,it=`.${u}-overlay`,lt=`${H}, .${u}-overlay`,ct=[_,it].join(", "),dt=`body *:not(${de}, ${ot}, ${_}, ${_} *):not([aria-hidden])`,ut=`[${B}]`,pe="usa-js-mobile-nav--active",pt="is-visible";let g,A,E;const G=()=>document.body.classList.contains(pe),fe=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),ft=tt(),me=window.getComputedStyle(document.body).getPropertyValue("padding-right"),z=`${parseInt(me.replace(/px/,""),10)+parseInt(ft.replace(/px/,""),10)}px`,mt=()=>{const e=document.querySelector(`${de}`).parentNode;E=document.querySelectorAll(dt),E.forEach(t=>{t!==e&&(t.setAttribute("aria-hidden",!0),t.setAttribute(B,""))})},At=()=>{E=document.querySelectorAll(ut),E&&E.forEach(e=>{e.removeAttribute("aria-hidden"),e.removeAttribute(B)})},gt=e=>{e?mt():At()},ht=()=>{fe&&document.body.classList.add("is-safari")},_t=e=>{const t=`-${window.scrollY}px`;fe&&e.style.setProperty("--scrolltop",t)},x=e=>{const{body:t}=document,s=typeof e=="boolean"?e:!G();_t(t),t.classList.toggle(pe,s),Je(ct).forEach(a=>a.classList.toggle(pt,s)),g.focusTrap.update(s);const n=t.querySelector(H),o=document.querySelector(ue);return t.style.paddingRight=t.style.paddingRight===z?me:z,gt(s),s&&n?n.focus():!s&&o&&getComputedStyle(o).display!=="none"&&o.focus(),s},D=()=>{const e=document.body.querySelector(H);G()&&e&&e.getBoundingClientRect().width===0&&g.toggleNav.call(e,!1)},Lt=()=>g.toggleNav.call(g,!1),C=()=>{A&&(ce(A,!1),A=null)},St=e=>{const t=e.target.closest(at);if(!e.target.matches(F)){const s=t.querySelector(F);s&&s.focus()}},vt=e=>{C(),St(e)};g=Qe({[st]:{[F](){return A!==this&&C(),A||(A=this,ce(A,!0)),!1},[nt]:C,[ue]:x,[lt]:x,[rt](){const e=this.closest(R.ACCORDION);e&&R.getButtons(e).forEach(t=>R.hide(t)),G()&&g.toggleNav.call(g,!1)}},keydown:{[P]:Ke({Escape:vt})},focusout:{[P](e){e.target.closest(P).contains(e.relatedTarget)||C()}}},{init(e){const t=e.matches(_)?e:e.querySelector(_);t&&(g.focusTrap=et(t,{Escape:Lt})),ht(),D(),window.addEventListener("resize",D,!1)},teardown(){window.removeEventListener("resize",D,!1),A=!1},focusTrap:null,toggleNav:x});export{Z as F};
