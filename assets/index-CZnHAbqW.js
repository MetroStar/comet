import{g as it}from"./iframe-DAkoUa8c.js";import{r as st,a as ct}from"./select-or-matches-DM7yTSmT.js";import{c as nt,d as lt,e as dt,r as V,b as ut,a as ft}from"./config-ODXtjL5r.js";import{r as bt}from"./active-element-BuxAly_Z.js";var $,w;function At(){return w||(w=1,$=function(s,f){return function(p){if(s!==p.target&&!s.contains(p.target))return f.call(this,p)}}),$}var O,x;function mt(){return x||(x=1,O={behavior:dt(),delegate:lt(),delegateAll:nt(),ignore:At(),keymap:st()}),O}var R,U;function ht(){if(U)return R;U=1;const{keymap:u}=mt(),s=V(),f=ut(),b=bt(),p='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]',E=g=>{const c=f(p,g),n=c[0],l=c[c.length-1];function A(d){b()===l&&(d.preventDefault(),n.focus())}function m(d){b()===n?(d.preventDefault(),l.focus()):c.includes(b())||(d.preventDefault(),n.focus())}return{firstTabStop:n,lastTabStop:l,tabAhead:A,tabBack:m}};return R=(g,c={})=>{const n=E(g),l=c,{Esc:A,Escape:m}=l;m&&!A&&(l.Esc=m);const d=u({Tab:n.tabAhead,"Shift+Tab":n.tabBack,...c});return s({keydown:d},{init(){n.firstTabStop&&n.firstTabStop.focus()},update(S){S?this.on():this.off()}})},R}var _,F;function pt(){return F||(F=1,_=function(){const s=document.createElement("div");s.style.visibility="hidden",s.style.overflow="scroll",s.style.msOverflowStyle="scrollbar",document.body.appendChild(s);const f=document.createElement("div");s.appendChild(f);const b=`${s.offsetWidth-f.offsetWidth}px`;return s.parentNode.removeChild(s),b}),_}var N,H;function Et(){if(H)return N;H=1;const u=ct(),s=ht(),f=pt(),b=V(),{prefix:p}=ft(),E=`${p}-modal`,g=`${E}-overlay`,c=`${E}-wrapper`,n="data-open-modal",l="data-close-modal",A="data-force-action",m="data-modal-hidden",d=`.${E}`,L=`.${c} *[data-focus]`,S=`${c} *[${l}]`,W=`*[${n}][aria-controls]`,j=`${S}, .${g}:not([${A}])`,Y=`body > *:not(.${c}):not([aria-hidden])`,G=`[${m}]`,M="usa-js-modal--active",K="usa-js-no-click",T="is-visible",B="is-hidden";let h,C,D;const X=()=>document.body.classList.contains(M),z=f(),J=()=>{h.toggleModal.call(h,!1)},Q=()=>{C=window.getComputedStyle(document.body).getPropertyValue("padding-right"),D=`${parseInt(C.replace(/px/,""),10)+parseInt(z.replace(/px/,""),10)}px`};function q(r){let e,t=r.target;const{body:o}=document,a=!X(),y=t?t.getAttribute("aria-controls"):document.querySelector(`.${c}.${T}`),i=a?document.getElementById(y):document.querySelector(`.${c}.${T}`);if(!i)return!1;const I=i.querySelector(L)?i.querySelector(L):i.querySelector(`.${E}`),P=document.getElementById(i.getAttribute("data-opener")),at=o.querySelector(W),k=i.getAttribute(A);return r.type==="keydown"&&i!==null&&(t=i.querySelector(S)),t&&(t.hasAttribute(n)&&(this.getAttribute("id")===null?(e=`modal-${Math.floor(Math.random()*9e5)+1e5}`,this.setAttribute("id",e)):e=this.getAttribute("id"),i.setAttribute("data-opener",e)),t.closest(`.${E}`)&&!(t.hasAttribute(l)||t.closest(`[${l}]`)))?!1:(o.classList.toggle(M,a),i.classList.toggle(T,a),i.classList.toggle(B,!a),k&&o.classList.toggle(K,a),o.style.paddingRight===D?o.style.removeProperty("padding-right"):o.style.paddingRight=D,a&&I?(k?h.focusTrap=s(i):h.focusTrap=s(i,{Escape:J}),h.focusTrap.update(a),I.focus(),document.querySelectorAll(Y).forEach(v=>{v.setAttribute("aria-hidden","true"),v.setAttribute(m,"")})):!a&&at&&P&&(document.querySelectorAll(G).forEach(v=>{v.removeAttribute("aria-hidden"),v.removeAttribute(m)}),P.focus(),h.focusTrap.update(a)),a)}const Z=r=>{const e=r.getAttribute("id"),t=document.createElement("div"),o=Array.from(r.attributes);return Q(),t.setAttribute("data-placeholder-for",e),t.style.display="none",t.setAttribute("aria-hidden","true"),o.forEach(a=>{t.setAttribute(`data-original-${a.name}`,a.value)}),t},tt=(r,e)=>{const t=r.getAttribute("id"),o=r.getAttribute("aria-labelledby"),a=r.getAttribute("aria-describedby"),y=r.hasAttribute(A);if(!o)throw new Error(`${t} is missing aria-labelledby attribute`);if(!a)throw new Error(`${t} is missing aria-desribedby attribute`);return e.setAttribute("role","dialog"),e.setAttribute("id",t),e.setAttribute("aria-labelledby",o),e.setAttribute("aria-describedby",a),y&&e.setAttribute(A,y),e.querySelectorAll(j).forEach(I=>{I.setAttribute("aria-controls",t)}),r.removeAttribute("id"),r.removeAttribute("aria-labelledby"),r.removeAttribute("aria-describedby"),r.setAttribute("tabindex","-1"),e},et=r=>{const e=r,t=document.createElement("div"),o=document.createElement("div");return t.classList.add(B,c),o.classList.add(g),t.append(o),o.append(e),tt(e,t),t},rt=r=>{if(!r.getAttribute("id"))throw new Error("Modal markup is missing ID");const t=Z(r);r.after(t);const o=et(r);document.body.appendChild(o)},ot=r=>{const e=r,t=e.parentElement.parentElement,o=t.getAttribute("id");if(!o)return;const a=document.querySelector(`[data-placeholder-for="${o}"]`);a&&(Array.from(a.attributes).forEach(i=>{i.name.startsWith("data-original-")&&e.setAttribute(i.name.substr(14),i.value)}),a.after(e),a.parentElement.removeChild(a)),t.parentElement.removeChild(t)};return h=b({},{init(r){u(d,r).forEach(e=>{const t=e.id;rt(e),u(`[aria-controls="${t}"]`,document).forEach(o=>{o.nodeName==="A"&&(o.setAttribute("role","button"),o.addEventListener("click",a=>a.preventDefault())),o.addEventListener("click",q)})})},teardown(r){u(d,r).forEach(e=>{const t=e.id;ot(e),u(`[aria-controls="${t}"]`,document).forEach(o=>o.removeEventListener("click",q))})},focusTrap:null,toggleModal:q}),N=h,N}var gt=Et();const Lt=it(gt);export{pt as a,Lt as m,ht as r};
