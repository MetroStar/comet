import{j as _}from"./jsx-runtime-Bxcv0yjW.js";import{R as c}from"./index-mfbfsM12.js";import{u as q,m as P,d as $,v as G,x as Q,y as Z,z as ee,_ as I,o as te,A as ne,V as oe,s as re}from"./line-segment-CsLfmdfI.js";import{b as se,c as ae,d as ce,e as R,f as B,h as le,u as ie,i as me,j as pe,k as ue,V as de}from"./victory-chart-1xmushny.js";import{V as ye}from"./victory-area-C0t0GkkR.js";import"./_commonjsHelpers-BosuxZz1.js";import"./pickBy-LpgX82Vb.js";import"./victory-clip-container-BjK7caeM.js";import"./arc-HBYzQ_7A.js";import"./pie-Bnf5nD2v.js";import"./default-transitions-BfLJ9QZ-.js";const U={width:450,height:300,padding:50};function he(e,r){const{fillInMissingData:n}=e,o=r.reduce((s,p)=>(p.forEach(u=>{s[u._x instanceof Date?u._x.getTime():u._x]=!0}),s),{}),t=Object.keys(o).map(s=>Number(s)),l=ee(t);return r.map(s=>{let p=0;const u=s[0]&&s[0]._x instanceof Date;return l.map((a,m)=>{let d=Number(a);const y=s[m-p];if(y){if((u?y._x.getTime():y._x)===d)return y;p++;const h=n?0:null;return d=u?new Date(d):d,{x:d,y:h,_x:d,_y:h}}const f=n?0:null;return d=u?new Date(d):d,{x:d,y:f,_x:d,_y:f}})})}function fe(e,r,n){if(e.y0)return e.y0;const o=e._y,t=e._group,l=n[0].map(i=>i.y0),p=n.slice(0,r).reduce((i,a)=>i.concat(a.filter(m=>e._x instanceof Date?m._x.getTime()===e._x.getTime():m._x===e._x).map(m=>m._y||0)),[]),u=p.length&&p.reduce((i,a)=>o<0&&a<0||o>=0&&a>=0?Number(a)+i:i,l[t]||0);return p.some(i=>i instanceof Date)?new Date(u):u}function ge(e,r,n){const o=e.xOffset||0;return r[n].map(t=>{const l=fe(t,n,r)||0;return Object.assign({},t,{_y0:t._y instanceof Date?l?new Date(l):t._y:l,_y1:t._y===null?null:t._y instanceof Date?new Date(Number(t._y)+Number(l)):t._y+l,_x1:t._x===null?null:t._x instanceof Date?new Date(Number(t._x)+Number(o)):t._x+o})})}function xe(e,r){const n=le(e,r),o=he(e,n);return o.map(l=>l.filter(s=>s._x!==null&&s._y!==null)).map((l,s)=>ge(e,o,s))}function W(e,r){const n=r||c.Children.toArray(e.children),o="stack",t=P(e,U,o),l=ae(t.theme,t.style,o),s=t.categories||ce(t,n),p=t.datasets||xe(t,n),u=n.map((g,h)=>c.cloneElement(g,{data:p[h]})),i={x:R(Object.assign({},t,{categories:s}),"x",u),y:R(Object.assign({},t,{categories:s}),"y",u)},a=t.range||{x:$(t,"x"),y:$(t,"y")},m={x:G(t,"x")||B(t,"x"),y:G(t,"y")||B(t,"y")},d={x:m.x.domain(i.x).range(t.horizontal?a.y:a.x),y:m.y.domain(i.y).range(t.horizontal?a.x:a.y)},{colorScale:y,horizontal:f}=t;return{datasets:p,categories:s,range:a,domain:i,horizontal:f,scale:d,style:l,colorScale:y,role:o}}const _e=e=>{const{children:r}=e,n=c.Children.toArray(r).map(o=>{const t=o;return{...t,props:Q(t.props,["sharedEvents"])}});return e.children=n,e};function Ce(e){const r=_e(e),[n,o]=c.useState(r);return c.useEffect(()=>{q(r,n)||o(r)},[n,o,r]),c.useMemo(()=>W(n,n.children),[n])}function be(e,r,n){if(e.labels)return r.length===n+1?e.labels:void 0}function De(e,r){const{categories:n,domain:o,range:t,scale:l,horizontal:s}=r;return{height:e.height,width:e.width,padding:Z(e),standalone:!1,theme:e.theme,categories:n,domain:o,range:t,scale:l,horizontal:s}}function Se(e,r){const n=r.type&&r.type.role,o=r.props.colorScale||e.colorScale;if(!(n!=="group"&&n!=="stack"))return e.theme?o||e.theme.props.colorScale:o}function X(e,r,n){const o=P(e,U,"stack"),t=r||c.Children.toArray(o.children),l=n||W(o,t),{datasets:s}=l,p=De(o,l),u=o.name||"stack",{theme:i}=o;return t.map((a,m)=>{const d=a.type&&a.type.role,y=s[m],f=se(a,m,l,i),g=o.labels?be(o,s,m):a.props.labels,h=a.props.name||`${u}-${d}-${m}`;return c.cloneElement(a,Object.assign({key:`${h}-key-${m}`,labels:g,name:h,domainPadding:a.props.domainPadding||o.domainPadding,theme:o.theme,labelComponent:o.labelComponent||a.props.labelComponent,style:f,colorScale:Se(o,a),data:y,polar:o.polar},p))})}const Pe={width:450,height:300,padding:50},Ee={containerComponent:c.createElement(oe,null),groupComponent:c.createElement("g",null),standalone:!0,theme:re.grayscale,fillInMissingData:!0},ke=e=>{const{role:r}=E,n=c.useMemo(()=>I({},e,Ee),[e]),{setAnimationState:o,getAnimationProps:t,getProps:l}=ie(),s=l(n),p=P(s,Pe,r),{eventKey:u,containerComponent:i,standalone:a,groupComponent:m,externalEventMutations:d,width:y,height:f,theme:g,polar:h,horizontal:k,name:v}=p,w=c.Children.toArray(p.children),C=Ce(p),{domain:j,scale:M,style:O}=C,V=c.useMemo(()=>X(s,w,C).map((S,H)=>{const J=Object.assign({animate:t(s,S,H)},S.props);return c.cloneElement(S,J)}).reverse(),[s,w,C,t]),A=c.useMemo(()=>a?{domain:j,scale:M,width:y,height:f,standalone:a,theme:g,style:O.parent,horizontal:k,polar:h,name:v}:{},[a,j,M,y,f,g,O,k,h,v]),b=c.useMemo(()=>te(n),[n]),D=c.useMemo(()=>{if(a){const T=I({},i.props,A,b);return c.cloneElement(i,T)}return c.cloneElement(m,b)},[m,a,i,A,b]),N=c.useMemo(()=>me(s),[s]),z=pe(n);return c.useEffect(()=>()=>{n.animate&&o(z,n)},[o,z,n]),ne(N)?c.cloneElement(D,D.props,V):c.createElement(ue,{container:D,eventKey:u,events:N,externalEventMutations:d},V)},ve={role:"stack",expectedComponents:["groupComponent","containerComponent","labelComponent"],getChildren:X},E=Object.assign(c.memo(ke,q),ve);E.displayName="VictoryStack";const Y=e=>_.jsx(de,{...e.chart,children:_.jsx(E,{children:e.data.map((r,n)=>_.jsx(ye,{style:{data:{fill:e.colors?e.colors[n]?e.colors[n]:e.colors[0]:"#0d7ea2"}},data:r,interpolation:e.smooth&&e.smooth?"natural":void 0,animate:{duration:2e3,onLoad:{duration:1e3}}},`stack-${n}`))})}),Be={title:"Data Viz/Stack Graph",component:Y,argTypes:{smooth:{control:"boolean"}}},we=e=>_.jsx("div",{style:{width:"600px",height:"400px"},children:_.jsx(Y,{...e})}),x=we.bind({});x.args={chart:{title:"Stack graph",width:600,height:400},colors:["#0d7ea2","#cd425b"],data:[[{x:0,y:3},{x:1,y:9},{x:2,y:5},{x:3,y:12},{x:4,y:6},{x:5,y:10}],[{x:0,y:1},{x:1,y:4},{x:2,y:7},{x:3,y:2},{x:4,y:5},{x:5,y:7}]],smooth:!1};var F,K,L;x.parameters={...x.parameters,docs:{...(F=x.parameters)==null?void 0:F.docs,source:{originalSource:`(args: StackGraphProps) => <div style={{
  width: '600px',
  height: '400px'
}}>
    <StackGraph {...args} />
  </div>`,...(L=(K=x.parameters)==null?void 0:K.docs)==null?void 0:L.source}}};const Fe=["Default"];export{x as Default,Fe as __namedExportsOrder,Be as default};
