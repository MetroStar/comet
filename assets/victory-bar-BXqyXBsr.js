var nt=Object.defineProperty;var ot=(e,n,t)=>n in e?nt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var S=(e,n,t)=>ot(e,typeof n!="symbol"?n+"":n,t);import{r as st,R as N}from"./index-mfbfsM12.js";import{m as J,i as F,g as at,a as it,G as rt,b as ct,c as lt,d as k,e as K,f as ht,h as Q,H as gt,j as ft,k as dt,l as mt,p as j,q as ut,_ as yt,P as xt,V as bt,r as Pt,s as Mt,w as $t,t as Lt}from"./line-segment-DjfrSo4q.js";import{g as H}from"./victory-chart-DrQHwmoJ.js";import{i as Ct}from"./isPlainObject-CYVBBrud.js";import{a as _t}from"./arc-HBYzQ_7A.js";const At=(e,n)=>{const t=s=>{let r=ft(e.scale[s])==="log"?1/Number.MAX_SAFE_INTEGER:0;const c=dt(e.domain[s]),l=mt(e.domain[s]);return c<0&&l<=0?r=l:c>=0&&l>0&&(r=c),n[`_${s}`]instanceof Date?new Date(r):r},o=n._y0!==void 0?n._y0:t("y"),a=n._x0!==void 0?n._x0:t("x");return rt(e,Object.assign({},n,{_y0:o,_x0:a}))},It=e=>{const{polar:n}=e,t=ct(e,"bar"),o=e.disableInlineStyles?{}:lt(e.style,t),a=e.range||{x:k(e,"x"),y:k(e,"y")},s={x:H(e,"x"),y:H(e,"y")},i={x:K(e,"x").domain(s.x).range(e.horizontal?a.y:a.x),y:K(e,"y").domain(s.y).range(e.horizontal?a.x:a.y)},r=n?e.origin||ht(e):void 0;let c=Q(e);return c=gt(c,s,0),{style:o,data:c,scale:i,domain:s,origin:r}},Rt=(e,n)=>{const t=J(e,n,"bar"),o=Object.assign({},t,It(t)),{alignment:a,barRatio:s,cornerRadius:i,data:r,disableInlineStyles:c,domain:l,events:h,height:d,horizontal:b,origin:u,padding:$,polar:P,scale:L,sharedEvents:R,standalone:q,style:p,theme:f,width:g,labels:C,name:_,barWidth:M,getPath:m}=o,y={parent:{horizontal:b,domain:l,scale:L,width:g,height:d,data:r,standalone:q,name:_,theme:f,polar:P,origin:u,padding:$,style:p.parent}};return r.reduce((v,x,A)=>{const w=F(x.eventKey)?A:x.eventKey,{x:z,y:V,y0:Y,x0:I}=At(o,x),E={alignment:a,barRatio:s,barWidth:M,cornerRadius:i,data:r,datum:x,disableInlineStyles:c,getPath:m,horizontal:b,index:A,polar:P,origin:u,scale:L,style:p.data,width:g,height:d,x:z,y:V,y0:Y,x0:I};v[w]={data:E};const O=at(o,x,A);return(O!=null||C&&(h||R))&&(v[w].labels=it(o,A)),v},y)},vt=8,pt=(e,n)=>{const{scale:t,data:o,style:a}=n;if(e)return j(e,n);if(a.width)return a.width;const s=t.x.range(),i=Math.abs(s[1]-s[0]),r=o.length+2,l=(n.barRatio||.5)*(o.length<2?vt:i/r);return Math.max(1,l)},wt=(e,n)=>{const t={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},o=(a,s)=>{F(e[a])?F(e[s])||(t[a]=j(e[s],n)):t[a]=j(e[a],n)};return o("topLeft","top"),o("topRight","top"),o("bottomLeft","bottom"),o("bottomRight","bottom"),t};function Ot(e){return Ct(e)}const Dt=(e,n)=>{const t={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0};return e?Ot(e)?wt(e,n):(t.topLeft=j(e,n),t.topRight=j(e,n),t):t},Et=function(e,n){if(e===void 0&&(e={}),n.disableInlineStyles)return{};const o={fill:"black",stroke:e.fill||"black"};return ut(Object.assign(o,e),n)},D=(e,n)=>({x:e,y:n,distance(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},add(t){return D(this.x+t.x,this.y+t.y)},subtract(t){return D(this.x-t.x,this.y-t.y)},scalarMult(t){return D(this.x*t,this.y*t)},scalarDivide(t){if(t===0)throw new Error("Division by 0 error");return D(this.x/t,this.y/t)},equals(t){return this.x===t.x&&this.y===t.y}}),Z=(e,n)=>({center:e,radius:n,hasIntersection(t){const o=this.center,a=t.center,s=this.radius,i=t.radius,r=o.distance(a);return!(r>s+i||r<Math.abs(s-i))},equals(t){const o=this.center,a=t.center,s=this.radius,i=t.radius;return s===i&&o.equals(a)},intersection(t){const o=this.center,a=t.center,s=this.radius,i=t.radius,r=o.distance(a);if(!this.hasIntersection(t)||this.equals(t))return[];const c=(Math.pow(s,2)-Math.pow(i,2)+Math.pow(r,2))/(2*r),l=Math.sqrt(Math.pow(s,2)-Math.pow(c,2)),h=o.add(a.subtract(o).scalarMult(c).scalarDivide(r)),{x:d,y:b}=o,{x:u,y:$}=a,{x:P,y:L}=h,R=[D(P-l*($-b)/r,L+l*(u-d)/r),D(P+l*($-b)/r,L-l*(u-d)/r)];return R.sort((q,p)=>q.x-p.x),R},solveX(t){const o=Math.sqrt(Math.pow(this.radius,2)-Math.pow(t-this.center.y,2));return[this.center.x-o,this.center.x+o]},solveY(t){const o=Math.sqrt(Math.pow(this.radius,2)-Math.pow(t-this.center.x,2));return[this.center.y-o,this.center.y+o]}}),X=(e,n)=>{const{x:t,x0:o,y:a,y0:s,horizontal:i}=e,r=e.alignment||"middle",c=r==="middle"?n/2:n,l=i?-1:1;return i?{x0:o,x1:t,y0:r==="start"?a:a-l*c,y1:r==="end"?a:a+l*c}:{x0:r==="start"?t:t-l*c,x1:r==="end"?t:t+l*c,y0:s,y1:a}},B=(e,n)=>{const{data:t,scale:o}=e,a=t[n]._x1===void 0?"_x":"_x1";return o.x(t[n][a])},St=(e,n)=>{const{scale:t}=e,o=t.y.range(),a=Math.max(...o),s=Math.abs(t.x.range()[1]-t.x.range()[0]);return n/(2*Math.PI*a)*s},G=e=>-1*e+Math.PI/2,Tt=(e,n)=>{const{getPath:t}=e;if(typeof t=="function"){const o={...e,...X(e,n)};return t(o)}},jt=(e,n)=>{const{data:t,scale:o,alignment:a}=e,s=B(e,n),i=Math.abs(o.x.range()[1]-o.x.range()[0]),r=n===0?B(e,t.length-1)-Math.PI*2:B(e,n-1);return n===0&&i<2*Math.PI?o.x.range()[0]:a==="start"||a==="end"?a==="start"?r:s:(s+r)/2},qt=(e,n)=>{const{data:t,scale:o,alignment:a}=e,s=B(e,n),i=Math.abs(o.x.range()[1]-o.x.range()[0]),r=o.x.range()[1]===2*Math.PI?B(e,0)+Math.PI*2:o.x.range()[1],c=n===t.length-1?B(e,0)+Math.PI*2:B(e,n+1);return n===t.length-1&&i<2*Math.PI?r:a==="start"||a==="end"?a==="start"?s:c:(s+c)/2},tt=(e,n,t)=>{const o=`${n.topLeft} ${n.topLeft} ${t}`,a=`${n.topRight} ${n.topRight} ${t}`,s=`${n.bottomLeft} ${n.bottomLeft} ${t}`,i=`${n.bottomRight} ${n.bottomRight} ${t}`;return`${["M",`A ${s},`,"L",`A ${o},`,"L",`A ${a},`,"L",`A ${i},`].reduce((l,h,d)=>`${l}${h} ${e[d].x}, ${e[d].y} 
`,"")} z`},zt=(e,n,t)=>{const{x0:o,x1:a,y0:s,y1:i}=e,r=c=>{const l=c==="Left",h=l?1:-1,d=l?o:a;let b={x:d+h*t[`bottom${c}`],y:s},u={x:d,y:s-n*t[`bottom${c}`]},$={x:d,y:i+n*t[`top${c}`]},P={x:d+h*t[`top${c}`],y:i};if(n===1?s-t[`bottom${c}`]<i+t[`top${c}`]:s+t[`bottom${c}`]>i-t[`top${c}`]){const q=D(d+h*t[`top${c}`],i+n*t[`top${c}`]),p=Z(q,t[`top${c}`]),f=D(d+h*t[`bottom${c}`],s-n*t[`bottom${c}`]),g=Z(f,t[`bottom${c}`]),C=p.intersection(g);if(C.length>0){const M=C[l?0:1];u={x:M.x,y:M.y},$={x:M.x,y:M.y}}else if(t[`top${c}`]>t[`bottom${c}`]){const m=p.solveX(s)[l?0:1];b={x:m,y:s},u={x:m,y:s},$={x:m,y:s}}else{const m=g.solveX(i)[l?0:1];u={x:m,y:i},$={x:m,y:i},P={x:m,y:i}}}const R=[b,u,$,P];return l?R:R.reverse()};return r("Left").concat(r("Right"))},Wt=(e,n,t)=>{const{y0:o,y1:a}=e,s=e.x0<e.x1?e.x0:e.x1,i=e.x0<e.x1?e.x1:e.x0,r=h=>{const d=h==="top",b=d?-1:1,u=d?a:o;let $={x:s,y:u-b*t[`${h}Left`]},P={x:s+t[`${h}Left`],y:u},L={x:i-t[`${h}Right`],y:u},R={x:i,y:u-b*t[`${h}Right`]};if(P.x>L.x){const p=D(s+t[`${h}Left`],u-b*t[`${h}Left`]),f=Z(p,t[`${h}Left`]),g=D(i-t[`${h}Right`],u-b*t[`${h}Right`]),C=Z(g,t[`${h}Right`]),_=f.intersection(C);if(_.length>0){const m=_[n>0?1:0];P={x:m.x,y:m.y},L={x:m.x,y:m.y}}else if(t[`${h}Right`]>t[`${h}Left`]){const y=C.solveY(s)[d?0:1];$={x:s,y},P={x:s,y},L={x:s,y}}else{const y=f.solveY(i)[d?0:1];R={x:i,y},L={x:i,y},P={x:i,y}}}return[$,P,L,R]},c=r("top"),l=r("bottom");return[l[1],l[0],...c,l[3],l[2]]},Nt=(e,n,t)=>{const o=X(e,n),a=o.y0>o.y1?1:-1,s=a>0?"0 0 1":"0 0 0",i=zt(o,a,t);return tt(i,t,s)},Bt=(e,n,t)=>{const o=X(e,n),a=o.x0<o.x1?1:-1,s="0 0 1",i={topRight:a>0?t.topLeft:t.bottomLeft,bottomRight:a>0?t.topRight:t.bottomRight,bottomLeft:a>0?t.bottomRight:t.topRight,topLeft:a>0?t.bottomLeft:t.topLeft},r=Wt(o,a,i);return tt(r,i,s)},Vt=(e,n)=>{const{datum:t,scale:o,index:a,alignment:s,style:i}=e,r=o.y(t._y0||0),c=o.y(t._y1!==void 0?t._y1:t._y),l=o.x(t._x1!==void 0?t._x1:t._x);let h,d;if(i.width){const f=St(e,i.width),g=s==="middle"?f/2:f;h=s==="start"?l:l-g,d=s==="end"?l:l+g}else h=jt(e,Number(a)),d=qt(e,Number(a));const b=f=>_t().innerRadius(r).outerRadius(c).startAngle(G(h)).endAngle(G(d)).cornerRadius(n[f])(),u=f=>{const g=b(`${f}Right`),C=g.match(/[A-Z]/g)||[],_=g.split(/[A-Z]/).slice(1),M=C.indexOf("L"),m=b(`${f}Left`),y=m.match(/[A-Z]/g)||[],v=m.split(/[A-Z]/).slice(1),x=y.indexOf("L");return{rightMoves:C,rightCoords:_,rightMiddle:M,leftMoves:y,leftCoords:v,leftMiddle:x}},$=()=>{const{topRight:f,topLeft:g}=n,C=c*Math.abs(d-h),{rightMoves:_,rightCoords:M,rightMiddle:m,leftMoves:y,leftCoords:v,leftMiddle:x}=u("top");let A,w;if(f===g||C<2*f+2*g)A=f>g?_:y,w=f>g?M:v;else{const I=W=>W<3,E=g>f&&I(m)?1:2;let O;if(f>g){const W=I(m)?x:x-2;O=I(x)?x-1:W}else{const W=I(x)?1:2;O=I(m)?W:x-2}A=[..._.slice(0,E),...y.slice(O)],w=[...M.slice(0,E),...v.slice(O)]}const z=A.indexOf("L"),V=A.slice(0,z),Y=w.slice(0,z);return V.map((I,E)=>({command:I,coords:Y[E].split(",")}))},P=()=>{const{bottomRight:f,bottomLeft:g}=n,C=r*Math.abs(d-h),{rightMoves:_,rightCoords:M,rightMiddle:m,leftMoves:y,leftCoords:v,leftMiddle:x}=u("bottom");let A,w;if(f===g||C<2*f+2*g)A=f>g?_:y,w=f>g?M:v;else{const I=(W,et)=>W.length-et<4,O=(f>g?I(_,m):I(y,x))?-1:-3;A=[...y.slice(0,x+2),..._.slice(O)],w=[...v.slice(0,x+2),...M.slice(O)]}const z=A.indexOf("L"),V=A.slice(z,-1),Y=w.slice(z,-1);return V.map((I,E)=>({command:I,coords:Y[E].split(",")}))},L=$(),R=P();return`${[...L,...R].reduce((f,g)=>`${f}${g.command} ${g.coords.join()}`,"")} z`},Yt=(e,n,t)=>e.getPath?Tt(e,n):e.horizontal?Bt(e,n,t):Nt(e,n,t),Zt=(e,n)=>Vt(e,n),Ft=e=>{const n=Et(e.style,e),t=pt(e.barWidth,Object.assign({},e,{style:n})),o=Dt(e.cornerRadius,Object.assign({},e,{style:n,barWidth:t})),a=j(e.ariaLabel,e),s=j(e.desc,e),i=j(e.id,e),r=j(e.tabIndex,e);return Object.assign({},e,{ariaLabel:a,style:n,barWidth:t,cornerRadius:o,desc:s,id:i,tabIndex:r})},Ht={pathComponent:N.createElement(xt,null),role:"presentation",shapeRendering:"auto"},Xt=st.forwardRef(function(n,t){const o=Ft(yt({},n,Ht)),{polar:a,origin:s,style:i,barWidth:r,cornerRadius:c}=o,l=a?Zt(o,c):Yt(o,r,c),h=a&&s?`translate(${s.x}, ${s.y})`:void 0;return o.pathComponent?N.cloneElement(o.pathComponent,{...o.events,"aria-label":o.ariaLabel,style:i,d:l,className:o.className,clipPath:o.clipPath,desc:o.desc,index:o.index,role:o.role,shapeRendering:o.shapeRendering,transform:o.transform||h,tabIndex:o.tabIndex,ref:t}):null}),U={width:450,height:300,padding:50},kt=[{x:1,y:1},{x:2,y:2},{x:3,y:3},{x:4,y:4}];class T extends N.Component{static getBaseProps(n){return Rt(n,U)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n,role:t}=Kt,o=J(this.props,U,t);if(this.shouldAnimate())return this.animateComponent(o,n);const a=this.renderData(o),s=o.standalone?this.renderContainer(o.containerComponent,a):a;return $t(s,o)}}S(T,"animationWhitelist",["data","domain","height","padding","style","width"]),S(T,"displayName","VictoryBar"),S(T,"role","bar"),S(T,"defaultTransitions",{onLoad:{duration:2e3,before:()=>({_y:0,_y1:0,_y0:0}),after:n=>({_y:n._y,_y1:n._y1,_y0:n._y0})},onExit:{duration:500,before:()=>({_y:0,yOffset:0})},onEnter:{duration:500,before:()=>({_y:0,_y1:0,_y0:0}),after:n=>({_y:n._y,_y1:n._y1,_y0:n._y0})}}),S(T,"defaultProps",{containerComponent:N.createElement(bt,null),data:kt,dataComponent:N.createElement(Xt,null),groupComponent:N.createElement("g",{role:"presentation"}),labelComponent:N.createElement(Pt,null),samples:50,sortOrder:"ascending",standalone:!0,theme:Mt.grayscale}),S(T,"getDomain",H),S(T,"getData",Q),S(T,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);const Kt=Lt(T);export{Kt as V};
