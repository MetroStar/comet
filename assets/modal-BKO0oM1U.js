import{j as n}from"./jsx-runtime-CKrituN3.js";import{r as S}from"./index-CBqU2yxZ.js";import{g as C}from"./_commonjsHelpers-BosuxZz1.js";import{s as k}from"./select-or-matches-Bu-g4rUn.js";import{a as q,d as w,e as P,o as j,b as N,s as H,c as U}from"./config-BXli1stc.js";import{k as F}from"./index-D6IA0wpC.js";import{a as V}from"./active-element-CTMAq7ve.js";import{s as Y}from"./sprite-Cw9lcZJJ.js";import{c as W}from"./index-Bl6ORisp.js";var G=function(t,e){return function(s){if(t!==s.target&&!t.contains(s.target))return e.call(this,s)}},z={behavior:q,delegate:w,delegateAll:P,ignore:G,keymap:F};const X=j,{keymap:J}=z,K=N,Q=H,h=V,Z='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]',ee=o=>{const t=Q(Z,o),e=t[0],a=t[t.length-1];function s(r){h()===a&&(r.preventDefault(),e.focus())}function i(r){h()===e?(r.preventDefault(),a.focus()):t.includes(h())||(r.preventDefault(),e.focus())}return{firstTabStop:e,lastTabStop:a,tabAhead:s,tabBack:i}};var te=(o,t={})=>{const e=ee(o),a=t,{Esc:s,Escape:i}=a;i&&!s&&(a.Esc=i);const r=J(X({Tab:e.tabAhead,"Shift+Tab":e.tabBack},t));return K({keydown:r},{init(){e.firstTabStop&&e.firstTabStop.focus()},update(u){u?this.on():this.off()}})},ae=function(){const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const a=`${t.offsetWidth-e.offsetWidth}px`;return t.parentNode.removeChild(t),a};const m=k,T=te,oe=ae,se=N,{prefix:re}=U,b=`${re}-modal`,D=`${b}-overlay`,p=`${b}-wrapper`,O="data-open-modal",g="data-close-modal",f="data-force-action",E="data-modal-hidden",L=`.${b}`,_=`.${p} *[data-focus]`,R=`${p} *[${g}]`,ie=`*[${O}][aria-controls]`,le=`${R}, .${D}:not([${f}])`,ne=`body > *:not(.${p}):not([aria-hidden])`,ce=`[${E}]`,M="usa-js-modal--active",de="usa-js-no-click",ue="is-visible",x="is-hidden";let c,I,y;const me=()=>document.body.classList.contains(M),fe=oe(),be=()=>{c.toggleModal.call(c,!1)},pe=()=>{I=window.getComputedStyle(document.body).getPropertyValue("padding-right"),y=`${parseInt(I.replace(/px/,""),10)+parseInt(fe.replace(/px/,""),10)}px`};function A(o){let t,e=o.target;const{body:a}=document,s=!me(),i=e?e.getAttribute("aria-controls"):document.querySelector(".usa-modal-wrapper.is-visible"),r=s?document.getElementById(i):document.querySelector(".usa-modal-wrapper.is-visible");if(!r)return!1;const l=r.querySelector(_)?r.querySelector(_):r.querySelector(".usa-modal"),u=document.getElementById(r.getAttribute("data-opener")),B=a.querySelector(ie),v=r.getAttribute(f);return o.type==="keydown"&&r!==null&&(e=r.querySelector(R)),e&&(e.hasAttribute(O)&&(this.getAttribute("id")===null?(t=`modal-${Math.floor(Math.random()*9e5)+1e5}`,this.setAttribute("id",t)):t=this.getAttribute("id"),r.setAttribute("data-opener",t)),e.closest(`.${b}`)&&!(e.hasAttribute(g)||e.closest(`[${g}]`)))?!1:(a.classList.toggle(M,s),r.classList.toggle(ue,s),r.classList.toggle(x,!s),v&&a.classList.toggle(de,s),a.style.paddingRight===y?a.style.removeProperty("padding-right"):a.style.paddingRight=y,s&&l?(v?c.focusTrap=T(r):c.focusTrap=T(r,{Escape:be}),c.focusTrap.update(s),l.focus(),document.querySelectorAll(ne).forEach(d=>{d.setAttribute("aria-hidden","true"),d.setAttribute(E,"")})):!s&&B&&u&&(document.querySelectorAll(ce).forEach(d=>{d.removeAttribute("aria-hidden"),d.removeAttribute(E)}),u.focus(),c.focusTrap.update(s)),s)}const he=o=>{const t=o.getAttribute("id"),e=document.createElement("div"),a=Array.from(o.attributes);return pe(),e.setAttribute("data-placeholder-for",t),e.style.display="none",e.setAttribute("aria-hidden","true"),a.forEach(s=>{e.setAttribute(`data-original-${s.name}`,s.value)}),e},Ae=(o,t)=>{const e=o.getAttribute("id"),a=o.getAttribute("aria-labelledby"),s=o.getAttribute("aria-describedby"),i=o.hasAttribute(f);if(!a)throw new Error(`${e} is missing aria-labelledby attribute`);if(!s)throw new Error(`${e} is missing aria-desribedby attribute`);return t.setAttribute("role","dialog"),t.setAttribute("id",e),t.setAttribute("aria-labelledby",a),t.setAttribute("aria-describedby",s),i&&t.setAttribute(f,i),t.querySelectorAll(le).forEach(l=>{l.setAttribute("aria-controls",e)}),o.removeAttribute("id"),o.removeAttribute("aria-labelledby"),o.removeAttribute("aria-describedby"),o.setAttribute("tabindex","-1"),t},ge=o=>{const t=o,e=document.createElement("div"),a=document.createElement("div");return e.classList.add(x,p),a.classList.add(D),e.append(a),a.append(t),Ae(t,e),e},Ee=o=>{if(!o.getAttribute("id"))throw new Error("Modal markup is missing ID");const e=he(o);o.after(e);const a=ge(o);document.body.appendChild(a)},ye=o=>{const t=o,e=t.parentElement.parentElement,a=e.getAttribute("id");if(!a)return;const s=document.querySelector(`[data-placeholder-for="${a}"]`);s&&(Array.from(s.attributes).forEach(r=>{r.name.startsWith("data-original-")&&t.setAttribute(r.name.substr(14),r.value)}),s.after(t),s.parentElement.removeChild(s)),e.parentElement.removeChild(e)};c=se({},{init(o){m(L,o).forEach(t=>{const e=t.id;Ee(t),m(`[aria-controls="${e}"]`,document).forEach(a=>{a.nodeName==="A"&&(a.setAttribute("role","button"),a.addEventListener("click",s=>s.preventDefault())),a.addEventListener("click",A)})})},teardown(o){m(L,o).forEach(t=>{const e=t.id;ye(t),m(`[aria-controls="${e}"]`,document).forEach(a=>a.removeEventListener("click",A))})},focusTrap:null,toggleModal:A});var ve=c;const $=C(ve),Se=({id:o,heading:t,size:e="small",footer:a,children:s})=>{const i=S.useRef(null);S.useLayoutEffect(()=>{const l=i.current;return $.on(l),()=>$.off(l)});const r=W("usa-modal",{"usa-modal--lg":e==="large"});return n.jsx("div",{ref:i,className:r,id:o,"aria-labelledby":`${o}-heading`,"aria-describedby":`${o}-description`,children:n.jsxs("div",{className:"usa-modal__content",children:[n.jsxs("div",{className:"usa-modal__main",children:[n.jsx("h2",{className:"usa-modal__heading",id:`${o}-heading`,children:t}),s,n.jsx("div",{className:"usa-modal__footer",children:a})]}),n.jsx("button",{className:"usa-button usa-modal__close","aria-label":"Close this window","data-close-modal":!0,children:n.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:n.jsx("use",{xlinkHref:`${Y}#close`})})})]})})};Se.__docgenInfo={description:"A modal disables page content and focuses the userâ€™s attention on a single task or message.",methods:[],displayName:"Modal",props:{id:{required:!0,tsType:{name:"string"},description:"The unique identifier for this component"},size:{required:!1,tsType:{name:"union",raw:"'small' | 'large'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'large'"}]},description:"The type of modal to display",defaultValue:{value:"'small'",computed:!1}},heading:{required:!0,tsType:{name:"string"},description:"The heading for the alert"},footer:{required:!1,tsType:{name:"ReactNode"},description:"The footer for the alert"},children:{required:!0,tsType:{name:"ReactNode"},description:"The contents of the alert"}}};export{Se as M,$ as m};
