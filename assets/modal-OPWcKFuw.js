import{j as n}from"./jsx-runtime-Bxcv0yjW.js";import{r as S}from"./index-mfbfsM12.js";import{g as B}from"./_commonjsHelpers-BosuxZz1.js";import{s as C}from"./select-or-matches-Bu-g4rUn.js";import{a as w,d as P,e as j,o as V,b as D,s as H,c as U}from"./config-BXli1stc.js";import{k as F}from"./index-D6IA0wpC.js";import{a as z}from"./active-element-CTMAq7ve.js";import{s as Y}from"./sprite-Cw9lcZJJ.js";import{c as W}from"./index-Bl6ORisp.js";var G=function(t,e){return function(r){if(t!==r.target&&!t.contains(r.target))return e.call(this,r)}},X={behavior:w,delegate:P,delegateAll:j,ignore:G,keymap:F};const J=V,{keymap:K}=X,Q=D,Z=H,g=z,ee='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]',te=a=>{const t=Z(ee,a),e=t[0],o=t[t.length-1];function r(s){g()===o&&(s.preventDefault(),e.focus())}function i(s){g()===e?(s.preventDefault(),o.focus()):t.includes(g())||(s.preventDefault(),e.focus())}return{firstTabStop:e,lastTabStop:o,tabAhead:r,tabBack:i}};var ae=(a,t={})=>{const e=te(a),o=t,{Esc:r,Escape:i}=o;i&&!r&&(o.Esc=i);const s=K(J({Tab:e.tabAhead,"Shift+Tab":e.tabBack},t));return Q({keydown:s},{init(){e.firstTabStop&&e.firstTabStop.focus()},update(u){u?this.on():this.off()}})},oe=function(){const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const o=`${t.offsetWidth-e.offsetWidth}px`;return t.parentNode.removeChild(t),o};const m=C,T=ae,re=oe,se=D,{prefix:ie}=U,h=`${ie}-modal`,O=`${h}-overlay`,b=`${h}-wrapper`,R="data-open-modal",y="data-close-modal",f="data-force-action",E="data-modal-hidden",N=`.${h}`,L=`.${b} *[data-focus]`,M=`${b} *[${y}]`,le=`*[${R}][aria-controls]`,ne=`${M}, .${O}:not([${f}])`,ce=`body > *:not(.${b}):not([aria-hidden])`,de=`[${E}]`,q="usa-js-modal--active",ue="usa-js-no-click",me="is-visible",x="is-hidden";let c,I,v;const fe=()=>document.body.classList.contains(q),pe=re(),he=()=>{c.toggleModal.call(c,!1)},be=()=>{I=window.getComputedStyle(document.body).getPropertyValue("padding-right"),v=`${parseInt(I.replace(/px/,""),10)+parseInt(pe.replace(/px/,""),10)}px`};function A(a){let t,e=a.target;const{body:o}=document,r=!fe(),i=e?e.getAttribute("aria-controls"):document.querySelector(".usa-modal-wrapper.is-visible"),s=r?document.getElementById(i):document.querySelector(".usa-modal-wrapper.is-visible");if(!s)return!1;const l=s.querySelector(L)?s.querySelector(L):s.querySelector(".usa-modal"),u=document.getElementById(s.getAttribute("data-opener")),k=o.querySelector(le),_=s.getAttribute(f);return a.type==="keydown"&&s!==null&&(e=s.querySelector(M)),e&&(e.hasAttribute(R)&&(this.getAttribute("id")===null?(t=`modal-${Math.floor(Math.random()*9e5)+1e5}`,this.setAttribute("id",t)):t=this.getAttribute("id"),s.setAttribute("data-opener",t)),e.closest(`.${h}`)&&!(e.hasAttribute(y)||e.closest(`[${y}]`)))?!1:(o.classList.toggle(q,r),s.classList.toggle(me,r),s.classList.toggle(x,!r),_&&o.classList.toggle(ue,r),o.style.paddingRight===v?o.style.removeProperty("padding-right"):o.style.paddingRight=v,r&&l?(_?c.focusTrap=T(s):c.focusTrap=T(s,{Escape:he}),c.focusTrap.update(r),l.focus(),document.querySelectorAll(ce).forEach(d=>{d.setAttribute("aria-hidden","true"),d.setAttribute(E,"")})):!r&&k&&u&&(document.querySelectorAll(de).forEach(d=>{d.removeAttribute("aria-hidden"),d.removeAttribute(E)}),u.focus(),c.focusTrap.update(r)),r)}const ge=a=>{const t=a.getAttribute("id"),e=document.createElement("div"),o=Array.from(a.attributes);return be(),e.setAttribute("data-placeholder-for",t),e.style.display="none",e.setAttribute("aria-hidden","true"),o.forEach(r=>{e.setAttribute(`data-original-${r.name}`,r.value)}),e},Ae=(a,t)=>{const e=a.getAttribute("id"),o=a.getAttribute("aria-labelledby"),r=a.getAttribute("aria-describedby"),i=a.hasAttribute(f);if(!o)throw new Error(`${e} is missing aria-labelledby attribute`);if(!r)throw new Error(`${e} is missing aria-desribedby attribute`);return t.setAttribute("role","dialog"),t.setAttribute("id",e),t.setAttribute("aria-labelledby",o),t.setAttribute("aria-describedby",r),i&&t.setAttribute(f,i),t.querySelectorAll(ne).forEach(l=>{l.setAttribute("aria-controls",e)}),a.removeAttribute("id"),a.removeAttribute("aria-labelledby"),a.removeAttribute("aria-describedby"),a.setAttribute("tabindex","-1"),t},ye=a=>{const t=a,e=document.createElement("div"),o=document.createElement("div");return e.classList.add(x,b),o.classList.add(O),e.append(o),o.append(t),Ae(t,e),e},Ee=a=>{if(!a.getAttribute("id"))throw new Error("Modal markup is missing ID");const e=ge(a);a.after(e);const o=ye(a);document.body.appendChild(o)},ve=a=>{const t=a,e=t.parentElement.parentElement,o=e.getAttribute("id");if(!o)return;const r=document.querySelector(`[data-placeholder-for="${o}"]`);r&&(Array.from(r.attributes).forEach(s=>{s.name.startsWith("data-original-")&&t.setAttribute(s.name.substr(14),s.value)}),r.after(t),r.parentElement.removeChild(r)),e.parentElement.removeChild(e)};c=se({},{init(a){m(N,a).forEach(t=>{const e=t.id;Ee(t),m(`[aria-controls="${e}"]`,document).forEach(o=>{o.nodeName==="A"&&(o.setAttribute("role","button"),o.addEventListener("click",r=>r.preventDefault())),o.addEventListener("click",A)})})},teardown(a){m(N,a).forEach(t=>{const e=t.id;ve(t),m(`[aria-controls="${e}"]`,document).forEach(o=>o.removeEventListener("click",A))})},focusTrap:null,toggleModal:A});var _e=c;const p=B(_e),$=({id:a,heading:t,size:e="small",footer:o,children:r})=>{const i=S.useRef(null);S.useLayoutEffect(()=>{const l=i.current;return p.on(l),()=>p.off(l)});const s=W("usa-modal",{"usa-modal--lg":e==="large"});return n.jsx("div",{ref:i,className:s,id:a,"aria-labelledby":`${a}-heading`,"aria-describedby":`${a}-description`,children:n.jsxs("div",{className:"usa-modal__content",children:[n.jsxs("div",{className:"usa-modal__main",children:[n.jsx("h2",{className:"usa-modal__heading",id:`${a}-heading`,children:t}),r,n.jsx("div",{className:"usa-modal__footer",children:o})]}),n.jsx("button",{className:"usa-button usa-modal__close","aria-label":"Close this window","data-close-modal":!0,children:n.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:n.jsx("use",{xlinkHref:`${Y}#close`})})})]})})};try{$.displayName="Modal",$.__docgenInfo={description:"A modal disables page content and focuses the user’s attention on a single task or message.",displayName:"Modal",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!0,type:{name:"string"}},size:{defaultValue:{value:"small"},description:"The type of modal to display",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"large"'}]}},heading:{defaultValue:null,description:"The heading for the alert",name:"heading",required:!0,type:{name:"string"}},footer:{defaultValue:null,description:"The footer for the alert",name:"footer",required:!1,type:{name:"ReactNode"}},children:{defaultValue:null,description:"The contents of the alert",name:"children",required:!0,type:{name:"ReactNode"}}}}}catch{}try{p.displayName="modal",p.__docgenInfo={description:"A modal disables page content and focuses the user’s attention on a single task or message.",displayName:"modal",props:{id:{defaultValue:null,description:"The unique identifier for this component",name:"id",required:!0,type:{name:"string"}},size:{defaultValue:{value:"small"},description:"The type of modal to display",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"large"'}]}},heading:{defaultValue:null,description:"The heading for the alert",name:"heading",required:!0,type:{name:"string"}},footer:{defaultValue:null,description:"The footer for the alert",name:"footer",required:!1,type:{name:"ReactNode"}},children:{defaultValue:null,description:"The contents of the alert",name:"children",required:!0,type:{name:"ReactNode"}}}}}catch{}export{$ as M,ae as f,p as m,oe as s};
